



<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Aggregation Mechanism &mdash; DIAS-Documentation 1.0 documentation</title>
  

  
  
  
  

  
  <script type="text/javascript" src="../../_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../../" src="../../_static/documentation_options.js"></script>
        <script type="text/javascript" src="../../_static/jquery.js"></script>
        <script type="text/javascript" src="../../_static/underscore.js"></script>
        <script type="text/javascript" src="../../_static/doctools.js"></script>
        <script async="async" type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    
    <script type="text/javascript" src="../../_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="Changing of selected states" href="change.selected.states.html" />
    <link rel="prev" title="Conceptual Architecture" href="conceptual.architecture.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../../index.html" class="icon icon-home"> DIAS-Documentation
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Contents</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../pre.requisites.html">Pre-requisites</a></li>
<li class="toctree-l1"><a class="reference internal" href="../quickstart.html">Quickstart</a></li>
<li class="toctree-l1"><a class="reference internal" href="../applications.html">Applications</a></li>
<li class="toctree-l1"><a class="reference internal" href="../architecture.html">Deployment Architecture</a></li>
<li class="toctree-l1"><a class="reference internal" href="../gui.html">GUIs</a></li>
<li class="toctree-l1"><a class="reference internal" href="../protopeer.html">Protopeer</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../dias.in.detail.html">How DIAS Works</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="conceptual.architecture.html">Conceptual Architecture</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">Aggregation Mechanism</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#case-1">Case 1</a></li>
<li class="toctree-l3"><a class="reference internal" href="#case-2">Case 2</a></li>
<li class="toctree-l3"><a class="reference internal" href="#case-3">Case 3</a></li>
<li class="toctree-l3"><a class="reference internal" href="#case-4">Case 4</a></li>
<li class="toctree-l3"><a class="reference internal" href="#case-5">Case 5</a></li>
<li class="toctree-l3"><a class="reference internal" href="#case-6">Case 6</a></li>
<li class="toctree-l3"><a class="reference internal" href="#case-7">Case 7</a></li>
<li class="toctree-l3"><a class="reference internal" href="#case-8">Case 8</a></li>
<li class="toctree-l3"><a class="reference internal" href="#case-8-1">Case 8.1</a></li>
<li class="toctree-l3"><a class="reference internal" href="#case-8-2">Case 8.2</a></li>
<li class="toctree-l3"><a class="reference internal" href="#case-8-3">Case 8.3</a></li>
<li class="toctree-l3"><a class="reference internal" href="#case-8-4">Case 8.4</a></li>
<li class="toctree-l3"><a class="reference internal" href="#case-8-5">Case 8.5</a></li>
<li class="toctree-l3"><a class="reference internal" href="#case-9">Case 9</a></li>
<li class="toctree-l3"><a class="reference internal" href="#case-10">Case 10</a></li>
<li class="toctree-l3"><a class="reference internal" href="#case-11">Case 11</a></li>
<li class="toctree-l3"><a class="reference internal" href="#case-12">Case 12</a></li>
<li class="toctree-l3"><a class="reference internal" href="#case-13">Case 13</a></li>
<li class="toctree-l3"><a class="reference internal" href="#case-14">Case 14</a></li>
<li class="toctree-l3"><a class="reference internal" href="#case-15">Case 15</a></li>
<li class="toctree-l3"><a class="reference internal" href="#case-16">Case 16</a></li>
<li class="toctree-l3"><a class="reference internal" href="#case-17">Case 17</a></li>
<li class="toctree-l3"><a class="reference internal" href="#case-20">Case 20</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="change.selected.states.html">Changing of selected states</a></li>
<li class="toctree-l2"><a class="reference internal" href="change.possible.states.html">Changing of possible states</a></li>
<li class="toctree-l2"><a class="reference internal" href="join.and.leave.html">Join and Leave</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../dias-logging-system.html">DIAS Logging System</a></li>
<li class="toctree-l1"><a class="reference internal" href="../glossary.html">Glossary</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">DIAS-Documentation</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../../index.html">Docs</a> &raquo;</li>
        
          <li><a href="../dias.in.detail.html">How DIAS Works</a> &raquo;</li>
        
      <li>Aggregation Mechanism</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../../_sources/sections/dias.in.detail/aggregation.mechanism.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="aggregation-mechanism">
<h1>Aggregation Mechanism<a class="headerlink" href="#aggregation-mechanism" title="Permalink to this headline">¶</a></h1>
<div class="section" id="case-1">
<h2>Case 1<a class="headerlink" href="#case-1" title="Permalink to this headline">¶</a></h2>
<p>Conditions:</p>
<blockquote>
<div><ul class="simple">
<li>Both peers have communicated before</li>
<li>Thus positiveAMD and positiveDMA are both true</li>
</ul>
</div></blockquote>
<div class="highlight-java notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="k">if</span><span class="o">(</span><span class="n">positiveAMD</span> <span class="o">&amp;&amp;</span> <span class="n">positiveDMA</span><span class="o">)</span>
  <span class="o">{</span>
    <span class="c1">// Level 1.1: Check for false positives in the positive AMS memberships</span>
    <span class="n">HashSet</span><span class="o">&lt;</span><span class="n">State</span><span class="o">&gt;</span> <span class="n">posAMS</span> <span class="o">=</span> <span class="o">(</span><span class="n">HashSet</span><span class="o">)</span> <span class="n">disseminatorReport</span><span class="o">.</span><span class="na">get</span><span class="o">(</span><span class="n">DisseminatorReport</span><span class="o">.</span><span class="na">POSITIVE_AMS</span><span class="o">);</span>
    <span class="n">Iterator</span><span class="o">&lt;</span><span class="n">State</span><span class="o">&gt;</span> <span class="n">it</span> <span class="o">=</span> <span class="n">posAMS</span><span class="o">.</span><span class="na">iterator</span><span class="o">();</span>
    <span class="n">logEvent</span><span class="o">(</span> <span class="s">&quot;receiveDisseminatorReport&quot;</span><span class="o">,</span> <span class="s">&quot;case&quot;</span><span class="o">,</span> <span class="s">&quot;1&quot;</span> <span class="o">);</span>
    <span class="k">this</span><span class="o">.</span><span class="na">log</span><span class="o">(</span><span class="mi">1</span><span class="o">,</span><span class="s">&quot;1. CURRENT STATE { &quot;</span>  <span class="o">+</span>
                <span class="s">&quot; positiveAMD = &quot;</span>             <span class="o">+</span>       <span class="n">positiveAMD</span>             <span class="o">+</span>       <span class="s">&quot; | positiveDMA = &quot;</span>     <span class="o">+</span> <span class="n">positiveDMA</span>   <span class="o">+</span>
              <span class="s">&quot; | shouldRemove = &quot;</span>    <span class="o">+</span>       <span class="n">shouldRemove</span>    <span class="o">+</span>       <span class="s">&quot; | posAMS.size() =  &quot;</span>  <span class="o">+</span> <span class="n">posAMS</span><span class="o">.</span><span class="na">size</span><span class="o">()</span> <span class="o">+</span>
              <span class="s">&quot; | purpose = &quot;</span>                 <span class="o">+</span>       <span class="n">predictedOutcome</span><span class="o">+</span>       <span class="s">&quot; }&quot;</span><span class="o">);</span>

    <span class="k">while</span><span class="o">(</span><span class="n">it</span><span class="o">.</span><span class="na">hasNext</span><span class="o">()){</span>
      <span class="n">State</span> <span class="n">state</span> <span class="o">=</span> <span class="n">it</span><span class="o">.</span><span class="na">next</span><span class="o">();</span>
      <span class="k">if</span><span class="o">(!</span><span class="k">this</span><span class="o">.</span><span class="na">SMA</span><span class="o">.</span><span class="na">contains</span><span class="o">(</span><span class="n">state</span><span class="o">.</span><span class="na">getStateId</span><span class="o">().</span><span class="na">toString</span><span class="o">()))</span> <span class="o">{</span>
        <span class="k">if</span><span class="o">(</span><span class="k">this</span><span class="o">.</span><span class="na">SMA</span><span class="o">.</span><span class="na">contains</span><span class="o">(</span><span class="n">newState</span><span class="o">.</span><span class="na">getStateId</span><span class="o">().</span><span class="na">toString</span><span class="o">()))</span> <span class="o">{</span>
          <span class="n">tobeRemoved</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">state</span><span class="o">);</span>
        <span class="o">}</span>
        <span class="n">it</span><span class="o">.</span><span class="na">remove</span><span class="o">();</span>
        <span class="k">this</span><span class="o">.</span><span class="na">log</span><span class="o">(</span><span class="mi">1</span><span class="o">,</span> <span class="s">&quot;REMOVED STATE: &quot;</span> <span class="o">+</span> <span class="n">state</span> <span class="o">+</span> <span class="s">&quot;, NEW STATE IS: &quot;</span> <span class="o">+</span> <span class="n">newState</span> <span class="o">+</span> <span class="s">&quot;, SMA contains new state: &quot;</span> <span class="o">+</span> <span class="k">this</span><span class="o">.</span><span class="na">SMA</span><span class="o">.</span><span class="na">contains</span><span class="o">(</span><span class="n">newState</span><span class="o">.</span><span class="na">getStateId</span><span class="o">().</span><span class="na">toString</span><span class="o">()));</span>
      <span class="o">}</span>
    <span class="o">}</span>
</pre></div>
</td></tr></table></div>
<table border="1" class="docutils">
<colgroup>
<col width="19%" />
<col width="81%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Line number</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>line 1</td>
<td><ol class="first last arabic simple">
<li>Peers have communicated before (start time = Big Bang)</li>
</ol>
</td>
</tr>
<tr class="row-odd"><td>line 12</td>
<td>Iterate on all the states that the “sending peer” thinks that I’m using</td>
</tr>
<tr class="row-even"><td>line 14</td>
<td><ol class="first last arabic simple" start="2">
<li>Disagree! I am not using this state in my aggregate</li>
</ol>
</td>
</tr>
<tr class="row-odd"><td>line 19</td>
<td><div class="first last line-block">
<div class="line">This will set th AMSRemoval field in the PULL message returned to the</div>
<div class="line">“sending peer” in order to update his own AMSs so that the sending peer</div>
<div class="line">can remove this state for this peer Dissemeniot:receiveAggregatorReport</div>
</div>
</td>
</tr>
</tbody>
</table>
<p><strong>Encoding:</strong></p>
<blockquote>
<div><div class="line-block">
<div class="line">Topic Matched = 1</div>
<div class="line">positiveAMD:1</div>
<div class="line">positiveDMA:1</div>
<div class="line">SMA[posAMS] = false</div>
<div class="line">SMA[selected_state] = true</div>
</div>
</div></blockquote>
</div>
<div class="section" id="case-2">
<h2>Case 2<a class="headerlink" href="#case-2" title="Permalink to this headline">¶</a></h2>
<div class="highlight-java notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="k">if</span><span class="o">(</span><span class="n">positiveAMD</span> <span class="o">&amp;&amp;</span> <span class="n">positiveDMA</span><span class="o">)</span>
<span class="o">{</span>
  <span class="k">if</span><span class="o">(</span><span class="n">posAMS</span><span class="o">.</span><span class="na">size</span><span class="o">()</span> <span class="o">==</span> <span class="mi">1</span><span class="o">)</span>
  <span class="o">{</span>
    <span class="n">State</span> <span class="n">oldState</span> <span class="o">=</span> <span class="n">posAMS</span><span class="o">.</span><span class="na">iterator</span><span class="o">().</span><span class="na">next</span><span class="o">();</span>
    <span class="k">if</span><span class="o">(</span><span class="n">shouldRemove</span><span class="o">)</span> <span class="o">{</span>
      <span class="n">AMSRemoval</span> <span class="o">=</span> <span class="n">oldState</span><span class="o">;</span>
      <span class="n">AMSAddition</span> <span class="o">=</span> <span class="kc">null</span><span class="o">;</span>
      <span class="kt">boolean</span> <span class="n">removed</span> <span class="o">=</span> <span class="k">this</span><span class="o">.</span><span class="na">removeSMAMembership</span><span class="o">(</span><span class="n">oldState</span><span class="o">);</span>
      <span class="k">if</span><span class="o">(!</span><span class="n">removed</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">if</span><span class="o">(</span><span class="n">possibles</span> <span class="o">!=</span> <span class="kc">null</span><span class="o">)</span> <span class="o">{</span>
          <span class="n">Iterator</span><span class="o">&lt;</span><span class="n">State</span><span class="o">&gt;</span> <span class="n">iterator</span> <span class="o">=</span> <span class="n">possibles</span><span class="o">.</span><span class="na">iterator</span><span class="o">();</span>
          <span class="kt">boolean</span> <span class="n">a</span> <span class="o">=</span> <span class="kc">false</span><span class="o">;</span>
          <span class="k">while</span><span class="o">(</span><span class="n">iterator</span><span class="o">.</span><span class="na">hasNext</span><span class="o">())</span> <span class="o">{</span>
            <span class="n">State</span> <span class="n">state</span> <span class="o">=</span> <span class="n">iterator</span><span class="o">.</span><span class="na">next</span><span class="o">();</span>
            <span class="k">if</span><span class="o">(</span><span class="k">this</span><span class="o">.</span><span class="na">removeSMAMembership</span><span class="o">(</span><span class="n">state</span><span class="o">))</span> <span class="o">{</span>
              <span class="k">this</span><span class="o">.</span><span class="na">removeAggregationState</span><span class="o">(</span><span class="n">state</span><span class="o">);</span>
              <span class="n">AMSRemoval</span> <span class="o">=</span> <span class="n">state</span><span class="o">;</span>
              <span class="n">outcome</span> <span class="o">=</span> <span class="n">AggregationOutcome</span><span class="o">.</span><span class="na">REMOVAL</span><span class="o">;</span>
              <span class="n">ack</span> <span class="o">=</span> <span class="kc">true</span><span class="o">;</span>
              <span class="n">a</span> <span class="o">=</span> <span class="kc">true</span><span class="o">;</span>
              <span class="k">this</span><span class="o">.</span><span class="na">log</span><span class="o">(</span><span class="mi">1</span><span class="o">,</span><span class="s">&quot;#####################&quot;</span><span class="o">);</span>
              <span class="k">break</span><span class="o">;</span>
            <span class="o">}</span>
          <span class="o">}</span>
          <span class="k">if</span><span class="o">(</span><span class="n">a</span> <span class="o">==</span> <span class="kc">false</span><span class="o">)</span>
          <span class="o">{</span>
            <span class="n">logEvent</span><span class="o">(</span> <span class="s">&quot;receiveDisseminatorReport&quot;</span><span class="o">,</span> <span class="s">&quot;case&quot;</span><span class="o">,</span> <span class="s">&quot;2&quot;</span> <span class="o">);</span>
            <span class="k">this</span><span class="o">.</span><span class="na">log</span><span class="o">(</span><span class="mi">1</span><span class="o">,</span> <span class="s">&quot;2. CURRENT STATE { &quot;</span> <span class="o">+</span>
                  <span class="s">&quot; positiveAMD = &quot;</span>           <span class="o">+</span> <span class="n">positiveAMD</span>           <span class="o">+</span>       <span class="s">&quot; | positiveDMA = &quot;</span>             <span class="o">+</span>       <span class="n">positiveDMA</span> <span class="o">+</span>
                  <span class="s">&quot; | shouldRemove = &quot;</span>                <span class="o">+</span> <span class="n">shouldRemove</span>          <span class="o">+</span>       <span class="s">&quot; | posAMS.size() = &quot;</span>   <span class="o">+</span>       <span class="s">&quot; 1 &quot;</span>           <span class="o">+</span>
                  <span class="s">&quot; | purpose = &quot;</span>                     <span class="o">+</span> <span class="n">predictedOutcome</span>      <span class="o">+</span>       <span class="s">&quot; | removed = &quot;</span>                 <span class="o">+</span>       <span class="n">removed</span>         <span class="o">+</span>
                  <span class="s">&quot; | possibles == null ? &quot;</span>   <span class="o">+</span> <span class="o">(</span><span class="n">possibles</span><span class="o">==</span><span class="kc">null</span><span class="o">)</span>     <span class="o">+</span>       <span class="s">&quot; | NOTHING REMOVED }&quot;</span><span class="o">);</span>
          <span class="o">}</span>
</pre></div>
</td></tr></table></div>
<table border="1" class="docutils">
<colgroup>
<col width="17%" />
<col width="83%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Line number</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>line 1</td>
<td><ol class="first last arabic simple">
<li>Peers have communicated before (start time = Big Bang)</li>
</ol>
</td>
</tr>
<tr class="row-odd"><td>line 3</td>
<td><ol class="first last arabic simple" start="2">
<li>Only a single state in the list of all states that the sending peers
think that we have</li>
</ol>
</td>
</tr>
<tr class="row-even"><td>line 6</td>
<td><ol class="first last arabic simple" start="3">
<li>Other peer thinks we should remove it (recall that there is only 1)
strategy = REMOVAL</li>
</ol>
</td>
</tr>
<tr class="row-odd"><td>line 9</td>
<td>Try to remove it</td>
</tr>
<tr class="row-even"><td>line 10</td>
<td>Didn’t find the state to be removed in my SMAs</td>
</tr>
<tr class="row-odd"><td>line 14</td>
<td>Iterate throug all possible states of the sending peer</td>
</tr>
<tr class="row-even"><td>line 17</td>
<td>Remove it from the SMA</td>
</tr>
<tr class="row-odd"><td>line 19</td>
<td><div class="first last line-block">
<div class="line">This will set th AMSRemoval field in the PULL message returned to the “sending peer”</div>
<div class="line">in order to update his own AMSs so that the sending peer can remove this state for</div>
<div class="line">for this peer Dissemeniot:receiveAggregatorReport</div>
</div>
</td>
</tr>
</tbody>
</table>
<p><strong>Encoding:</strong></p>
<blockquote>
<div><div class="line-block">
<div class="line">Topic Matched = 1</div>
<div class="line">positiveAMD:1</div>
<div class="line">positiveDMA:1</div>
<div class="line">posAMS.size:1</div>
<div class="line">purpose:REMOVAL*</div>
<div class="line">SMA[posAMS] = false</div>
<div class="line">POS <sup>1</sup>: <em>not null</em></div>
<div class="line">SMA[selected_state] <sup>2</sup> = true</div>
</div>
</div></blockquote>
<p><strong>Notes</strong></p>
<blockquote>
<div><div class="line-block">
<div class="line">* shouldRemove:true</div>
<div class="line">1 POS: possible states of the sending peer</div>
<div class="line">2 SMA[POS]: SMA contains one state from the possible states of the sending peer</div>
<div class="line">newState = DisseminatorReport.SELECTED_STATE</div>
</div>
</div></blockquote>
</div>
<div class="section" id="case-3">
<h2>Case 3<a class="headerlink" href="#case-3" title="Permalink to this headline">¶</a></h2>
<div class="highlight-java notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="k">if</span><span class="o">(</span><span class="n">positiveAMD</span> <span class="o">&amp;&amp;</span> <span class="n">positiveDMA</span><span class="o">)</span>
<span class="o">{</span>
  <span class="k">if</span><span class="o">(</span><span class="n">posAMS</span><span class="o">.</span><span class="na">size</span><span class="o">()</span> <span class="o">==</span> <span class="mi">1</span><span class="o">)</span>
    <span class="o">{</span>
      <span class="n">State</span> <span class="n">oldState</span> <span class="o">=</span> <span class="n">posAMS</span><span class="o">.</span><span class="na">iterator</span><span class="o">().</span><span class="na">next</span><span class="o">();</span>
      <span class="k">if</span><span class="o">(</span><span class="n">shouldRemove</span><span class="o">)</span> <span class="o">{</span>
        <span class="n">AMSRemoval</span> <span class="o">=</span> <span class="n">oldState</span><span class="o">;</span>
        <span class="n">AMSAddition</span> <span class="o">=</span> <span class="kc">null</span><span class="o">;</span>
        <span class="kt">boolean</span> <span class="n">removed</span> <span class="o">=</span> <span class="k">this</span><span class="o">.</span><span class="na">removeSMAMembership</span><span class="o">(</span><span class="n">oldState</span><span class="o">);</span>
        <span class="k">if</span><span class="o">(!</span><span class="n">removed</span><span class="o">)</span> <span class="o">{</span>
          <span class="k">if</span><span class="o">(</span><span class="n">possibles</span> <span class="o">!=</span> <span class="kc">null</span><span class="o">)</span> <span class="o">{</span>
            <span class="c1">// not executed in this case, omitted here</span>
          <span class="o">}</span> <span class="k">else</span>
          <span class="o">{</span>
            <span class="n">logEvent</span><span class="o">(</span> <span class="s">&quot;receiveDisseminatorReport&quot;</span><span class="o">,</span> <span class="s">&quot;case&quot;</span><span class="o">,</span> <span class="s">&quot;3&quot;</span> <span class="o">);</span>
            <span class="k">this</span><span class="o">.</span><span class="na">log</span><span class="o">(</span><span class="mi">1</span><span class="o">,</span> <span class="s">&quot;3. CURRENT STATE { &quot;</span> <span class="o">+</span>
                  <span class="s">&quot; positiveAMD = &quot;</span>           <span class="o">+</span> <span class="n">positiveAMD</span>           <span class="o">+</span>       <span class="s">&quot; | positiveDMA = &quot;</span>     <span class="o">+</span>       <span class="n">positiveDMA</span> <span class="o">+</span>
                  <span class="s">&quot; | shouldRemove = &quot;</span>                <span class="o">+</span> <span class="n">shouldRemove</span>          <span class="o">+</span>       <span class="s">&quot; | posAMS.size() = &quot;</span>   <span class="o">+</span>       <span class="s">&quot; 1 &quot;</span>           <span class="o">+</span>
                  <span class="s">&quot; | purpose = &quot;</span>                     <span class="o">+</span> <span class="n">predictedOutcome</span>      <span class="o">+</span>       <span class="s">&quot; | removed = &quot;</span>                 <span class="o">+</span>       <span class="n">removed</span>         <span class="o">+</span>
                  <span class="s">&quot; | possibles == null ? &quot;</span>   <span class="o">+</span> <span class="o">(</span><span class="n">possibles</span><span class="o">==</span><span class="kc">null</span><span class="o">)</span> <span class="o">+</span>   <span class="s">&quot; | NOTHING REMOVED }&quot;</span><span class="o">);</span>
          <span class="o">}</span>
</pre></div>
</td></tr></table></div>
<table border="1" class="docutils">
<colgroup>
<col width="20%" />
<col width="80%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Line number</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>line 1</td>
<td><ol class="first last arabic simple">
<li>Peers have communicated before (start time = Big Bang)</li>
</ol>
</td>
</tr>
<tr class="row-odd"><td>line 3</td>
<td><ol class="first last arabic simple" start="2">
<li>Only a single state in the list of all states that the sending peers
think that we have</li>
</ol>
</td>
</tr>
<tr class="row-even"><td>line 6</td>
<td><ol class="first last arabic simple" start="3">
<li>Other peer thinks we should remove it (recall that there is only 1)
strategy = REMOVAL</li>
</ol>
</td>
</tr>
<tr class="row-odd"><td>line 9</td>
<td>Try to remove it</td>
</tr>
<tr class="row-even"><td>line 10</td>
<td>Oups! Didn’t find the state to be removed in my SMAs!</td>
</tr>
<tr class="row-odd"><td>line 11</td>
<td>Sending peer has no possible states
(Just to avoid null pointer exceptions)</td>
</tr>
</tbody>
</table>
<p><strong>Encoding:</strong></p>
<blockquote>
<div><div class="line-block">
<div class="line">Topic Matched = 1</div>
<div class="line">positiveAMD:1</div>
<div class="line">positiveDMA:1</div>
<div class="line">posAMS.size:1</div>
<div class="line">purpose:REMOVAL*</div>
<div class="line">SMA[posAMS] = false</div>
<div class="line">POS <sup>1</sup>: <em>null</em></div>
<div class="line">SMA[selected_state] <sup>2</sup> = true</div>
</div>
<p><strong>Notes</strong></p>
<blockquote>
<div><div class="line-block">
<div class="line">* shouldRemove:true</div>
<div class="line">1 POS: possible states of the sending peer</div>
<div class="line">2 SMA[POS]: SMA contains one state from the possible states of the sending peer</div>
<div class="line">newState = DisseminatorReport.SELECTED_STATE</div>
</div>
</div></blockquote>
</div></blockquote>
</div>
<div class="section" id="case-4">
<h2>Case 4<a class="headerlink" href="#case-4" title="Permalink to this headline">¶</a></h2>
<div class="highlight-java notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="k">if</span><span class="o">(</span><span class="n">positiveAMD</span> <span class="o">&amp;&amp;</span> <span class="n">positive</span> <span class="n">DMA</span><span class="o">)</span>
<span class="o">{</span>
  <span class="k">if</span><span class="o">(</span><span class="n">posAMS</span><span class="o">.</span><span class="na">size</span><span class="o">()</span> <span class="o">==</span> <span class="mi">1</span><span class="o">)</span>
  <span class="o">{</span>
    <span class="n">State</span> <span class="n">oldState</span> <span class="o">=</span> <span class="n">posAMS</span><span class="o">.</span><span class="na">iterator</span><span class="o">().</span><span class="na">next</span><span class="o">();</span>
    <span class="k">if</span><span class="o">(</span><span class="n">shouldRemove</span><span class="o">)</span> <span class="o">{</span>
      <span class="n">AMSRemoval</span> <span class="o">=</span> <span class="n">oldState</span><span class="o">;</span>
      <span class="n">AMSAddition</span> <span class="o">=</span> <span class="kc">null</span><span class="o">;</span>
      <span class="kt">boolean</span> <span class="n">removed</span> <span class="o">=</span> <span class="k">this</span><span class="o">.</span><span class="na">removeSMAMembership</span><span class="o">(</span><span class="n">oldState</span><span class="o">);</span>
      <span class="k">if</span><span class="o">(!</span><span class="n">removed</span><span class="o">)</span> <span class="o">{</span>
        <span class="c1">// Not executed in case 4, omitted</span>
      <span class="o">}</span> <span class="k">else</span>
      <span class="o">{</span>
        <span class="k">this</span><span class="o">.</span><span class="na">removeAggregationState</span><span class="o">(</span><span class="n">oldState</span><span class="o">);</span>

        <span class="n">logEvent</span><span class="o">(</span> <span class="s">&quot;receiveDisseminatorReport&quot;</span><span class="o">,</span> <span class="s">&quot;case&quot;</span><span class="o">,</span> <span class="s">&quot;4&quot;</span> <span class="o">);</span>
        <span class="k">this</span><span class="o">.</span><span class="na">log</span><span class="o">(</span><span class="mi">1</span><span class="o">,</span><span class="s">&quot;4. CURRENT STATE { &quot;</span> <span class="o">+</span>
              <span class="s">&quot; positiveAMD = &quot;</span>               <span class="o">+</span> <span class="n">positiveAMD</span>           <span class="o">+</span>       <span class="s">&quot; | positiveDMA = &quot;</span>     <span class="o">+</span>       <span class="n">positiveDMA</span> <span class="o">+</span>
              <span class="s">&quot; | shouldRemove = &quot;</span>            <span class="o">+</span> <span class="n">shouldRemove</span>          <span class="o">+</span>       <span class="s">&quot; | posAMS.size() = &quot;</span>   <span class="o">+</span>       <span class="s">&quot; 1 &quot;</span>           <span class="o">+</span>
              <span class="s">&quot; | purpose = &quot;</span>                         <span class="o">+</span> <span class="n">predictedOutcome</span>      <span class="o">+</span>       <span class="s">&quot; | removed = &quot;</span>                 <span class="o">+</span>       <span class="n">removed</span>         <span class="o">+</span>
              <span class="s">&quot; | possibles == null ? &quot;</span>       <span class="o">+</span> <span class="o">(</span><span class="n">possibles</span><span class="o">==</span><span class="kc">null</span><span class="o">)</span> <span class="o">+</span>   <span class="s">&quot; | OUTCOME = REMOVAL }&quot;</span><span class="o">);</span>
        <span class="n">outcome</span><span class="o">=</span><span class="n">AggregationOutcome</span><span class="o">.</span><span class="na">REMOVAL</span><span class="o">;</span>
        <span class="n">ack</span><span class="o">=</span><span class="kc">true</span><span class="o">;</span>
      <span class="o">}</span>
    <span class="o">}</span>
</pre></div>
</td></tr></table></div>
<table border="1" class="docutils">
<colgroup>
<col width="20%" />
<col width="80%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Line number</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>line 1</td>
<td><ol class="first last arabic simple">
<li>Peers have communicated before (start time = Big Bang)</li>
</ol>
</td>
</tr>
<tr class="row-odd"><td>line 3</td>
<td><ol class="first last arabic simple" start="2">
<li>Only a single state in the list of all states that the sending peers
think that we have</li>
</ol>
</td>
</tr>
<tr class="row-even"><td>line 6</td>
<td><ol class="first last arabic simple" start="3">
<li>Other peer thinks we should remove it (recall that there is only 1)
strategy = REMOVAL</li>
</ol>
</td>
</tr>
<tr class="row-odd"><td>line 9</td>
<td>Try to remove it</td>
</tr>
<tr class="row-even"><td>line 12</td>
<td>Successfully removed it</td>
</tr>
</tbody>
</table>
<p><strong>Encoding:</strong></p>
<blockquote>
<div><div class="line-block">
<div class="line">Topic Matched = 1</div>
<div class="line">positiveAMD:1</div>
<div class="line">positiveDMA:1</div>
<div class="line">posAMS.size:1</div>
<div class="line">purpose:REMOVAL*</div>
<div class="line">SMA[posAMS] = false</div>
</div>
</div></blockquote>
<p><strong>Notes</strong></p>
<blockquote>
<div><div class="line-block">
<div class="line">* shouldRemove:true</div>
<div class="line">1 POS: possible states of the sending peer</div>
<div class="line">2 SMA[POS]: SMA contains one state from the possible states of the sending peer</div>
<div class="line">newState = DisseminatorReport.SELECTED_STATE</div>
</div>
</div></blockquote>
</div>
<div class="section" id="case-5">
<h2>Case 5<a class="headerlink" href="#case-5" title="Permalink to this headline">¶</a></h2>
<div class="highlight-java notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="k">if</span><span class="o">(</span><span class="n">positiveAMD</span> <span class="o">&amp;&amp;</span> <span class="n">positive</span> <span class="n">DMA</span><span class="o">)</span>
<span class="o">{</span>
  <span class="k">if</span><span class="o">(</span><span class="n">posAMS</span><span class="o">.</span><span class="na">size</span><span class="o">()</span> <span class="o">==</span> <span class="mi">1</span><span class="o">)</span>
  <span class="o">{</span>
    <span class="n">State</span> <span class="n">oldState</span><span class="o">=</span><span class="n">posAMS</span><span class="o">.</span><span class="na">iterator</span><span class="o">().</span><span class="na">next</span><span class="o">();</span>
    <span class="k">if</span><span class="o">(</span><span class="n">shouldRemove</span><span class="o">)</span> <span class="o">{</span>
      <span class="c1">// not executed in case 5, omitted</span>
    <span class="o">}</span>
    <span class="k">else</span>
    <span class="o">{</span>
      <span class="k">if</span><span class="o">(!</span><span class="n">oldState</span><span class="o">.</span><span class="na">equals</span><span class="o">(</span><span class="n">newState</span><span class="o">))</span>
      <span class="o">{</span>
        <span class="kt">double</span> <span class="n">count0</span> <span class="o">=</span> <span class="o">(</span><span class="n">Double</span><span class="o">)</span> <span class="k">this</span><span class="o">.</span><span class="na">aggregates</span><span class="o">.</span><span class="na">getAggregate</span><span class="o">(</span><span class="n">AggregationFunction</span><span class="o">.</span><span class="na">COUNT</span><span class="o">);</span>
        <span class="n">AMSRemoval</span> <span class="o">=</span> <span class="n">oldState</span><span class="o">;</span>
        <span class="kt">boolean</span> <span class="n">s1</span> <span class="o">=</span> <span class="k">this</span><span class="o">.</span><span class="na">removeSMAMembership</span><span class="o">(</span><span class="n">oldState</span><span class="o">);</span>
        <span class="k">this</span><span class="o">.</span><span class="na">removeAggregationState</span><span class="o">(</span><span class="n">oldState</span><span class="o">);</span>
        <span class="kt">double</span> <span class="n">count1</span> <span class="o">=</span> <span class="o">(</span><span class="n">Double</span><span class="o">)</span><span class="k">this</span><span class="o">.</span><span class="na">aggregates</span><span class="o">.</span><span class="na">getAggregate</span><span class="o">(</span><span class="n">AggregationFunction</span><span class="o">.</span><span class="na">COUNT</span><span class="o">);</span>
        <span class="n">AMSAddition</span> <span class="o">=</span> <span class="n">newState</span><span class="o">;</span>
        <span class="kt">boolean</span> <span class="n">s2</span> <span class="o">=</span> <span class="k">this</span><span class="o">.</span><span class="na">addSMAMembership</span><span class="o">(</span><span class="n">newState</span><span class="o">);</span>
        <span class="k">this</span><span class="o">.</span><span class="na">addAggregationState</span><span class="o">(</span><span class="n">newState</span><span class="o">);</span>
        <span class="kt">double</span> <span class="n">count2</span> <span class="o">=</span> <span class="o">(</span><span class="n">Double</span><span class="o">)</span> <span class="k">this</span><span class="o">.</span><span class="na">aggregates</span><span class="o">.</span><span class="na">getAggregate</span><span class="o">(</span><span class="n">AggregationFunction</span><span class="o">.</span><span class="na">COUNT</span><span class="o">);</span>

        <span class="n">logEvent</span><span class="o">(</span> <span class="s">&quot;receiveDisseminatorReport&quot;</span><span class="o">,</span> <span class="s">&quot;case&quot;</span><span class="o">,</span> <span class="s">&quot;5&quot;</span> <span class="o">);</span>
        <span class="k">this</span><span class="o">.</span><span class="na">log</span><span class="o">(</span><span class="mi">1</span><span class="o">,</span><span class="s">&quot;5. CURRENT STATE { &quot;</span> <span class="o">+</span>
              <span class="s">&quot; positiveAMD = &quot;</span>                       <span class="o">+</span> <span class="n">positiveAMD</span>           <span class="o">+</span> <span class="s">&quot; | positiveDMA = &quot;</span>                                   <span class="o">+</span>       <span class="n">positiveDMA</span>                             <span class="o">+</span>
              <span class="s">&quot; | shouldRemove = &quot;</span>                    <span class="o">+</span> <span class="n">shouldRemove</span>          <span class="o">+</span> <span class="s">&quot; | posAMS.size() = &quot;</span>                                 <span class="o">+</span>       <span class="s">&quot; 1 &quot;</span>                                           <span class="o">+</span>
              <span class="s">&quot; | purpose = &quot;</span>                                 <span class="o">+</span> <span class="n">predictedOutcome</span>      <span class="o">+</span> <span class="s">&quot; | old.State.equals(newState) = &quot;</span>    <span class="o">+</span>       <span class="n">oldState</span><span class="o">.</span><span class="na">equals</span><span class="o">(</span><span class="n">newState</span><span class="o">)</span>       <span class="o">+</span>
              <span class="s">&quot; | removeOldSMAMembership = &quot;</span>  <span class="o">+</span> <span class="n">s1</span>                            <span class="o">+</span> <span class="s">&quot; | addNewSMAMembership = &quot;</span>                   <span class="o">+</span>       <span class="n">s2</span>                                                      <span class="o">+</span>
              <span class="s">&quot; | count0 = &quot;</span>                                  <span class="o">+</span> <span class="n">count0</span>                        <span class="o">+</span> <span class="s">&quot; | count1 = &quot;</span>                                                <span class="o">+</span>       <span class="n">count1</span>                                          <span class="o">+</span>
              <span class="s">&quot; | count2 = &quot;</span>                                  <span class="o">+</span> <span class="n">count2</span>                        <span class="o">+</span>
              <span class="s">&quot; | OUTCOME = UPDATE }&quot;</span><span class="o">);</span>
        <span class="n">outcome</span> <span class="o">=</span> <span class="n">AggregationOutcome</span><span class="o">.</span><span class="na">REPLACE</span><span class="o">;</span>
        <span class="n">ack</span> <span class="o">=</span> <span class="kc">true</span><span class="o">;</span>
</pre></div>
</td></tr></table></div>
<table border="1" class="docutils">
<colgroup>
<col width="20%" />
<col width="80%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Line number</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>line 1</td>
<td><ol class="first last arabic simple">
<li>Peers have communicated before (start time = Big Bang)</li>
</ol>
</td>
</tr>
<tr class="row-odd"><td>line 3</td>
<td><ol class="first last arabic simple" start="2">
<li>Only a single state in the list of all states that the sending peers
think that we have</li>
</ol>
</td>
</tr>
<tr class="row-even"><td>line 9</td>
<td><ol class="first last arabic simple" start="3">
<li>Other peer thinks we should EXPLOIT it
(recall that there is only 1 state in posAMS)</li>
</ol>
</td>
</tr>
<tr class="row-odd"><td>line 11</td>
<td>posAMS[0] != new selected state</td>
</tr>
<tr class="row-even"><td>line 16 - 20</td>
<td>Replace the old selected state with the new one</td>
</tr>
<tr class="row-odd"><td>line 32</td>
<td>Successfully replaced it</td>
</tr>
</tbody>
</table>
<p><strong>Encoding:</strong></p>
<blockquote>
<div><div class="line-block">
<div class="line">Topic Matched = 1</div>
<div class="line">positiveAMD:1</div>
<div class="line">positiveDMA:1</div>
<div class="line">posAMS.size:1</div>
<div class="line">purpose:EXPLOITATION*</div>
<div class="line">posAMS[0] != SELECTED_STATE</div>
</div>
</div></blockquote>
<p><strong>Notes</strong></p>
<blockquote>
<div><div class="line-block">
<div class="line">* shouldRemove:false</div>
<div class="line">newState = DisseminatorReport.SELECTED_STATE</div>
</div>
</div></blockquote>
</div>
<div class="section" id="case-6">
<h2>Case 6<a class="headerlink" href="#case-6" title="Permalink to this headline">¶</a></h2>
<div class="highlight-java notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="k">if</span><span class="o">(</span><span class="n">positiveAMD</span> <span class="o">&amp;&amp;</span> <span class="n">positive</span> <span class="n">DMA</span><span class="o">)</span>
<span class="o">{</span>
  <span class="k">if</span><span class="o">(</span><span class="n">posAMS</span><span class="o">.</span><span class="na">size</span><span class="o">()</span> <span class="o">==</span> <span class="mi">1</span><span class="o">)</span>
  <span class="o">{</span>
    <span class="n">State</span> <span class="n">oldState</span> <span class="o">=</span> <span class="n">posAMS</span><span class="o">.</span><span class="na">iterator</span><span class="o">().</span><span class="na">next</span><span class="o">();</span>
    <span class="k">if</span><span class="o">(</span><span class="n">shouldRemove</span><span class="o">)</span> <span class="o">{</span>
      <span class="c1">// Not executed in case 6, omitted here</span>
    <span class="o">}</span>
    <span class="k">else</span>
    <span class="o">{</span>
      <span class="k">if</span><span class="o">(!</span><span class="n">oldState</span><span class="o">.</span><span class="na">equals</span><span class="o">(</span><span class="n">newState</span><span class="o">)){</span>
        <span class="c1">// Not executed int case 6, omitted here</span>
      <span class="o">}</span>
      <span class="k">else</span>
      <span class="o">{</span>
        <span class="k">try</span><span class="o">{</span>
          <span class="k">this</span><span class="o">.</span><span class="na">aggregates</span><span class="o">.</span><span class="na">updateMaxMin</span><span class="o">(</span><span class="n">newState</span><span class="o">);</span>
        <span class="o">}</span>
        <span class="k">catch</span><span class="o">(</span><span class="n">StateException</span> <span class="n">ex</span><span class="o">)</span>
        <span class="o">{</span>
          <span class="n">RawLog</span><span class="o">.</span><span class="na">print</span><span class="o">(</span><span class="mi">1</span><span class="o">,</span><span class="n">ex</span><span class="o">.</span><span class="na">toString</span><span class="o">()</span> <span class="o">+</span> <span class="n">ex</span><span class="o">.</span><span class="na">getStateExcMsg</span><span class="o">());</span>
        <span class="o">}</span>

        <span class="n">logEvent</span><span class="o">(</span> <span class="s">&quot;receiveDisseminatorReport&quot;</span><span class="o">,</span> <span class="s">&quot;case&quot;</span><span class="o">,</span> <span class="s">&quot;6&quot;</span> <span class="o">);</span>
        <span class="k">this</span><span class="o">.</span><span class="na">log</span><span class="o">(</span><span class="mi">1</span><span class="o">,</span><span class="s">&quot;6. CURRENT STATE { &quot;</span> <span class="o">+</span>
              <span class="s">&quot; positiveAMD = &quot;</span>       <span class="o">+</span> <span class="n">positiveAMD</span>           <span class="o">+</span>       <span class="s">&quot; | positiveDMA = &quot;</span>                             <span class="o">+</span>       <span class="n">positiveDMA</span>                             <span class="o">+</span>
              <span class="s">&quot; | shouldRemove = &quot;</span>    <span class="o">+</span> <span class="n">shouldRemove</span>          <span class="o">+</span>       <span class="s">&quot; | posAMS.size() = &quot;</span>                           <span class="o">+</span>       <span class="s">&quot; 1 &quot;</span>                                           <span class="o">+</span>
              <span class="s">&quot; | purpose = &quot;</span>                 <span class="o">+</span> <span class="n">predictedOutcome</span>      <span class="o">+</span>       <span class="s">&quot; | old.State.equals(newState) = &quot;</span>      <span class="o">+</span>       <span class="n">oldState</span><span class="o">.</span><span class="na">equals</span><span class="o">(</span><span class="n">newState</span><span class="o">)</span>       <span class="o">+</span>
              <span class="s">&quot; | OUTCOME = DOUBLE }&quot;</span><span class="o">);</span>
        <span class="n">outcome</span><span class="o">=</span><span class="n">AggregationOutcome</span><span class="o">.</span><span class="na">DOUBLE</span><span class="o">;</span>
        <span class="n">ack</span><span class="o">=</span><span class="kc">true</span><span class="o">;</span>
      <span class="o">}</span>
</pre></div>
</td></tr></table></div>
<table border="1" class="docutils">
<colgroup>
<col width="20%" />
<col width="80%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Line number</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>line 1</td>
<td><ol class="first last arabic simple">
<li>Peers have communicated before (start time = Big Bang)</li>
</ol>
</td>
</tr>
<tr class="row-odd"><td>line 3</td>
<td><ol class="first last arabic simple" start="2">
<li>Only a single state in the list of all states that the sending peers
think that we have</li>
</ol>
</td>
</tr>
<tr class="row-even"><td>line 9</td>
<td><ol class="first last arabic simple" start="3">
<li>Other peer thinks we should EXPLOIT it
(recall that there is only 1 state in posAMS)</li>
</ol>
</td>
</tr>
<tr class="row-odd"><td>line 11</td>
<td>posAMS[0] != new selected state
(in case 6, this is not true -&gt; old = new)</td>
</tr>
<tr class="row-even"><td>line 14 - 32</td>
<td>Do nothing</td>
</tr>
<tr class="row-odd"><td>line 29</td>
<td>Successfully replaced (since we had nothing to do)</td>
</tr>
</tbody>
</table>
<p><strong>Encoding:</strong></p>
<blockquote>
<div><div class="line-block">
<div class="line">Topic Matched = 1</div>
<div class="line">positiveAMD:1</div>
<div class="line">positiveDMA:1</div>
<div class="line">posAMS.size:1</div>
<div class="line">purpose:EXPLOITATION*</div>
<div class="line">posAMS[0] != SELECTED_STATE</div>
</div>
</div></blockquote>
<p><strong>Notes</strong></p>
<blockquote>
<div><div class="line-block">
<div class="line">* shouldRemove:false</div>
<div class="line">newState = DisseminatorReport.SELECTED_STATE</div>
</div>
</div></blockquote>
</div>
<div class="section" id="case-7">
<h2>Case 7<a class="headerlink" href="#case-7" title="Permalink to this headline">¶</a></h2>
<div class="highlight-java notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="k">if</span><span class="o">(</span><span class="n">positiveAMD</span> <span class="o">&amp;&amp;</span> <span class="n">positive</span> <span class="n">DMA</span><span class="o">)</span>
<span class="o">{</span>
  <span class="k">if</span><span class="o">(</span><span class="n">posAMS</span><span class="o">.</span><span class="na">size</span><span class="o">()</span> <span class="o">==</span> <span class="mi">1</span><span class="o">)</span>
  <span class="o">{</span>
    <span class="c1">// Not executed in case 7, omitted here</span>
  <span class="o">}</span>
  <span class="k">else</span>
  <span class="o">{</span>
    <span class="k">if</span><span class="o">(</span><span class="n">posAMS</span><span class="o">.</span><span class="na">size</span><span class="o">()</span> <span class="o">==</span> <span class="mi">0</span> <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="n">shouldRemove</span><span class="o">)</span>
    <span class="o">{</span>
      <span class="n">AMSAddition</span> <span class="o">=</span> <span class="n">newState</span><span class="o">;</span>
      <span class="n">AMSRemoval</span> <span class="o">=</span> <span class="kc">null</span><span class="o">;</span>
      <span class="kt">boolean</span> <span class="n">bool</span> <span class="o">=</span> <span class="k">this</span><span class="o">.</span><span class="na">SMA</span><span class="o">.</span><span class="na">contains</span><span class="o">(</span><span class="n">newState</span><span class="o">.</span><span class="na">getStateId</span><span class="o">().</span><span class="na">toString</span><span class="o">());</span>
      <span class="k">if</span><span class="o">(</span><span class="n">bool</span><span class="o">)</span> <span class="o">{</span>
        <span class="kt">double</span> <span class="n">count0</span> <span class="o">=</span> <span class="o">(</span><span class="n">Double</span><span class="o">)</span><span class="k">this</span><span class="o">.</span><span class="na">aggregates</span><span class="o">.</span><span class="na">getAggregate</span><span class="o">(</span><span class="n">AggregationFunction</span><span class="o">.</span><span class="na">COUNT</span><span class="o">);</span>

        <span class="n">outcome</span> <span class="o">=</span> <span class="n">AggregationOutcome</span><span class="o">.</span><span class="na">DOUBLE</span><span class="o">;</span>

        <span class="n">logEvent</span><span class="o">(</span> <span class="s">&quot;receiveDisseminatorReport&quot;</span><span class="o">,</span> <span class="s">&quot;case&quot;</span><span class="o">,</span> <span class="s">&quot;7&quot;</span> <span class="o">);</span>
        <span class="k">this</span><span class="o">.</span><span class="na">log</span><span class="o">(</span><span class="mi">1</span><span class="o">,</span><span class="s">&quot;7. CURRENT STATE { &quot;</span> <span class="o">+</span>
              <span class="s">&quot; positiveAMD = &quot;</span>               <span class="o">+</span>       <span class="n">positiveAMD</span>             <span class="o">+</span>       <span class="s">&quot; | positiveDMA = &quot;</span>                     <span class="o">+</span>       <span class="n">positiveDMA</span> <span class="o">+</span>
              <span class="s">&quot; | shouldRemove = &quot;</span>            <span class="o">+</span>       <span class="n">shouldRemove</span>            <span class="o">+</span>       <span class="s">&quot; | posAMS.size() = &quot;</span>                   <span class="o">+</span>       <span class="s">&quot; 0 &quot;</span>           <span class="o">+</span>
              <span class="s">&quot; | purpose = &quot;</span>                         <span class="o">+</span>       <span class="n">predictedOutcome</span>        <span class="o">+</span>       <span class="s">&quot; | SMA.contains(newState) = &quot;</span>  <span class="o">+</span>       <span class="n">bool</span>            <span class="o">+</span>
              <span class="s">&quot; | count0 = &quot;</span>                          <span class="o">+</span>       <span class="n">count0</span>                          <span class="o">+</span>
              <span class="s">&quot; | OUTCOME = DUPLICATE }&quot;</span><span class="o">);</span>

        <span class="n">AMSAddition</span> <span class="o">=</span> <span class="n">newState</span><span class="o">;</span>
        <span class="n">AMSRemoval</span> <span class="o">=</span> <span class="kc">null</span><span class="o">;</span>
        <span class="k">if</span><span class="o">(!</span><span class="n">tobeRemoved</span><span class="o">.</span><span class="na">isEmpty</span><span class="o">())</span> <span class="o">{</span>
          <span class="n">AMSRemoval</span> <span class="o">=</span> <span class="n">tobeRemoved</span><span class="o">.</span><span class="na">get</span><span class="o">(</span><span class="mi">0</span><span class="o">);</span>
        <span class="o">}</span>
        <span class="n">ack</span> <span class="o">=</span> <span class="kc">true</span><span class="o">;</span>
</pre></div>
</td></tr></table></div>
<table border="1" class="docutils">
<colgroup>
<col width="20%" />
<col width="80%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Line number</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>line 1</td>
<td><ol class="first last arabic simple">
<li>Peers have communicated before (start time = Big Bang)</li>
</ol>
</td>
</tr>
<tr class="row-odd"><td>line 9</td>
<td><ol class="first last arabic simple" start="2">
<li>No entries in the list of states that the sending peer think that we
have</li>
</ol>
</td>
</tr>
<tr class="row-even"><td>line 9</td>
<td><ol class="first last arabic simple" start="3">
<li>Sending peer sends an EXPLOITATION</li>
</ol>
</td>
</tr>
<tr class="row-odd"><td>line 14</td>
<td>New selected state is already in our aggregation</td>
</tr>
<tr class="row-even"><td>line 29 - 31</td>
<td>Jovan and Edward are still unclear why this code is here</td>
</tr>
</tbody>
</table>
<p><strong>Encoding:</strong></p>
<blockquote>
<div><div class="line-block">
<div class="line">Topic Matched = 1</div>
<div class="line">positiveAMD:1</div>
<div class="line">positiveDMA:1</div>
<div class="line">posAMS.size:0</div>
<div class="line">purpose:EXPLOITATION*</div>
</div>
</div></blockquote>
<p><strong>Notes</strong></p>
<blockquote>
<div><div class="line-block">
<div class="line">* shouldRemove:false</div>
<div class="line">newState = DisseminatorReport.SELECTED_STATE</div>
</div>
</div></blockquote>
</div>
<div class="section" id="case-8">
<h2>Case 8<a class="headerlink" href="#case-8" title="Permalink to this headline">¶</a></h2>
<div class="highlight-java notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="k">if</span><span class="o">(</span><span class="n">positiveAMD</span> <span class="o">&amp;&amp;</span> <span class="n">positive</span> <span class="n">DMA</span><span class="o">)</span>
<span class="o">{</span>
  <span class="k">if</span><span class="o">(</span><span class="n">posAMS</span><span class="o">.</span><span class="na">size</span><span class="o">()</span> <span class="o">==</span> <span class="mi">1</span><span class="o">)</span>
  <span class="o">{</span>
    <span class="c1">// Not executed in case 8, omitted here</span>
  <span class="o">}</span>
  <span class="k">else</span>
  <span class="o">{</span>
    <span class="k">if</span><span class="o">(</span><span class="n">posAMS</span><span class="o">.</span><span class="na">size</span><span class="o">()</span> <span class="o">==</span> <span class="mi">0</span> <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="n">shouldRemove</span><span class="o">)</span>
    <span class="o">{</span>
      <span class="n">AMSAddition</span> <span class="o">=</span> <span class="n">newState</span><span class="o">;</span>
      <span class="n">AMSRemoval</span> <span class="o">=</span> <span class="kc">null</span><span class="o">;</span>
      <span class="kt">boolean</span> <span class="n">bool</span> <span class="o">=</span> <span class="k">this</span><span class="o">.</span><span class="na">SMA</span><span class="o">.</span><span class="na">contains</span><span class="o">(</span><span class="n">newState</span><span class="o">.</span><span class="na">getStateId</span><span class="o">().</span><span class="na">toString</span><span class="o">());</span>
      <span class="k">if</span><span class="o">(</span><span class="n">bool</span><span class="o">)</span>
      <span class="o">{</span>
        <span class="c1">// Not executed in case 8, omitted here</span>
      <span class="o">}</span>
      <span class="k">else</span>
      <span class="o">{</span>
        <span class="kt">double</span> <span class="n">count0</span> <span class="o">=</span> <span class="o">(</span><span class="n">Double</span><span class="o">)</span><span class="k">this</span><span class="o">.</span><span class="na">aggregates</span><span class="o">.</span><span class="na">getAggregate</span><span class="o">(</span><span class="n">AggregationFunction</span><span class="o">.</span><span class="na">COUNT</span><span class="o">);</span>

        <span class="n">logEvent</span><span class="o">(</span> <span class="s">&quot;receiveDisseminatorReport&quot;</span><span class="o">,</span> <span class="s">&quot;case&quot;</span><span class="o">,</span> <span class="s">&quot;8&quot;</span> <span class="o">);</span>
        <span class="k">this</span><span class="o">.</span><span class="na">log</span><span class="o">(</span><span class="mi">1</span><span class="o">,</span><span class="s">&quot;8. CURRENT STATE { &quot;</span> <span class="o">+</span>
              <span class="s">&quot; positiveAMD = &quot;</span>       <span class="o">+</span> <span class="n">positiveAMD</span>           <span class="o">+</span>       <span class="s">&quot; | positiveDMA = &quot;</span>                     <span class="o">+</span>       <span class="n">positiveDMA</span>     <span class="o">+</span>
              <span class="s">&quot; | shouldRemove = &quot;</span>    <span class="o">+</span> <span class="n">shouldRemove</span>          <span class="o">+</span>       <span class="s">&quot; | posAMS.size() = &quot;</span>                   <span class="o">+</span>       <span class="s">&quot;0 &quot;</span>                    <span class="o">+</span>
              <span class="s">&quot; | purpose = &quot;</span>                 <span class="o">+</span> <span class="n">predictedOutcome</span>      <span class="o">+</span>       <span class="s">&quot; | SMA.contains(newState) = &quot;</span>  <span class="o">+</span>       <span class="n">bool</span>                    <span class="o">+</span>
              <span class="s">&quot; | count0 = &quot;</span>                          <span class="o">+</span>       <span class="n">count0</span>                          <span class="o">+</span>
              <span class="s">&quot; | NOT INCONSISTENCY ANYMORE }&quot;</span><span class="o">);</span>
        <span class="k">if</span><span class="o">(</span><span class="n">possibles</span> <span class="o">!=</span> <span class="kc">null</span><span class="o">)</span> <span class="o">{</span>
          <span class="n">Iterator</span><span class="o">&lt;</span><span class="n">State</span><span class="o">&gt;</span> <span class="n">iterator</span> <span class="o">=</span> <span class="n">possibles</span><span class="o">.</span><span class="na">iterator</span><span class="o">();</span>
          <span class="kt">boolean</span> <span class="n">found</span> <span class="o">=</span> <span class="kc">false</span><span class="o">;</span>
          <span class="n">State</span> <span class="n">state</span> <span class="o">=</span> <span class="kc">null</span><span class="o">;</span>
          <span class="k">while</span><span class="o">(</span><span class="n">iterator</span><span class="o">.</span><span class="na">hasNext</span><span class="o">())</span> <span class="o">{</span>
            <span class="n">state</span> <span class="o">=</span> <span class="n">iterator</span><span class="o">.</span><span class="na">next</span><span class="o">();</span>
            <span class="k">if</span><span class="o">(</span><span class="k">this</span><span class="o">.</span><span class="na">removeSMAMembership</span><span class="o">(</span><span class="n">state</span><span class="o">))</span> <span class="o">{</span>
              <span class="k">this</span><span class="o">.</span><span class="na">removeAggregationState</span><span class="o">(</span><span class="n">state</span><span class="o">);</span>
              <span class="n">found</span> <span class="o">=</span> <span class="kc">true</span><span class="o">;</span>
            <span class="o">}</span>
          <span class="o">}</span>
          <span class="kt">double</span> <span class="n">count1</span> <span class="o">=</span> <span class="o">(</span><span class="n">Double</span><span class="o">)</span><span class="k">this</span><span class="o">.</span><span class="na">aggregates</span><span class="o">.</span><span class="na">getAggregate</span><span class="o">(</span><span class="n">AggregationFunction</span><span class="o">.</span><span class="na">COUNT</span><span class="o">);</span>
</pre></div>
</td></tr></table></div>
<table border="1" class="docutils">
<colgroup>
<col width="20%" />
<col width="80%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Line number</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>line 1</td>
<td><ol class="first last arabic simple">
<li>Peers have communicated before (start time = Big Bang)</li>
</ol>
</td>
</tr>
<tr class="row-odd"><td>line 9</td>
<td><ol class="first last arabic simple" start="2">
<li>No entries in the list of states that the sending peer think that we
have</li>
</ol>
</td>
</tr>
<tr class="row-even"><td>line 9</td>
<td><ol class="first last arabic simple" start="3">
<li>Sending peer did not send a REMOVAL
(this is the correct way of interpreting this flag)</li>
</ol>
</td>
</tr>
<tr class="row-odd"><td>line 18</td>
<td><ol class="first last arabic simple" start="4">
<li>New selected state is NOT in our aggregation</li>
</ol>
</td>
</tr>
<tr class="row-even"><td>line 29</td>
<td><ol class="first last arabic simple" start="5">
<li>Sending peer sent it’s possible states</li>
</ol>
</td>
</tr>
<tr class="row-odd"><td>line 33 - 39</td>
<td><strong>To be safe</strong>, remove all possible states of the sending peer from our
Aggregator</td>
</tr>
</tbody>
</table>
<p><strong>Encoding:</strong></p>
<blockquote>
<div><div class="line-block">
<div class="line">Topic Matched = 1</div>
<div class="line">positiveAMD:1</div>
<div class="line">positiveDMA:1</div>
<div class="line">posAMS.size:0</div>
<div class="line">purpose:EXPLOITATION*</div>
</div>
</div></blockquote>
<p><strong>Notes</strong></p>
<blockquote>
<div><div class="line-block">
<div class="line">* shouldRemove:false</div>
<div class="line">newState = DisseminatorReport.SELECTED_STATE</div>
<div class="line">possibles = DisseminatorReport.ALL_POSSIBLE_STATES</div>
</div>
</div></blockquote>
</div>
<div class="section" id="case-8-1">
<h2>Case 8.1<a class="headerlink" href="#case-8-1" title="Permalink to this headline">¶</a></h2>
<div class="highlight-java notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="k">if</span><span class="o">(</span><span class="n">positiveAMD</span> <span class="o">&amp;&amp;</span> <span class="n">positive</span> <span class="n">DMA</span><span class="o">)</span>
<span class="o">{</span>
  <span class="k">if</span><span class="o">(</span><span class="n">posAMS</span><span class="o">.</span><span class="na">size</span><span class="o">()</span> <span class="o">==</span> <span class="mi">1</span><span class="o">)</span>
  <span class="o">{</span>
    <span class="c1">// Not executed in case 8.1, omitted here</span>
  <span class="o">}</span>
  <span class="k">else</span>
  <span class="o">{</span>
    <span class="k">if</span><span class="o">(</span><span class="n">posAMS</span><span class="o">.</span><span class="na">size</span><span class="o">()</span> <span class="o">==</span> <span class="mi">0</span> <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="n">shouldRemove</span><span class="o">)</span>
    <span class="o">{</span>
      <span class="n">AMSAddition</span> <span class="o">=</span> <span class="n">newState</span><span class="o">;</span>
      <span class="n">AMSRemoval</span> <span class="o">=</span> <span class="kc">null</span><span class="o">;</span>
      <span class="kt">boolean</span> <span class="n">bool</span> <span class="o">=</span> <span class="k">this</span><span class="o">.</span><span class="na">SMA</span><span class="o">.</span><span class="na">contains</span><span class="o">(</span><span class="n">newState</span><span class="o">.</span><span class="na">getStateId</span><span class="o">().</span><span class="na">toString</span><span class="o">());</span>
      <span class="k">if</span><span class="o">(</span><span class="n">bool</span><span class="o">)</span>
      <span class="o">{</span>
        <span class="c1">// Not executed in case 8.1, omitted here</span>
      <span class="o">}</span>
      <span class="k">else</span>
      <span class="o">{</span>
        <span class="kt">double</span> <span class="n">count0</span> <span class="o">=</span> <span class="o">(</span><span class="n">Double</span><span class="o">)</span><span class="k">this</span><span class="o">.</span><span class="na">aggregates</span><span class="o">.</span><span class="na">getAggregate</span><span class="o">(</span><span class="n">AggregationFunction</span><span class="o">.</span><span class="na">COUNT</span><span class="o">);</span>

        <span class="n">logEvent</span><span class="o">(</span> <span class="s">&quot;receiveDisseminatorReport&quot;</span><span class="o">,</span> <span class="s">&quot;case&quot;</span><span class="o">,</span> <span class="s">&quot;8&quot;</span> <span class="o">);</span>
        <span class="k">this</span><span class="o">.</span><span class="na">log</span><span class="o">(</span><span class="mi">1</span><span class="o">,</span><span class="s">&quot;8. CURRENT STATE { &quot;</span> <span class="o">+</span>
              <span class="s">&quot; positiveAMD = &quot;</span>       <span class="o">+</span> <span class="n">positiveAMD</span>           <span class="o">+</span>       <span class="s">&quot; | positiveDMA = &quot;</span>                     <span class="o">+</span>       <span class="n">positiveDMA</span>     <span class="o">+</span>
              <span class="s">&quot; | shouldRemove = &quot;</span>    <span class="o">+</span> <span class="n">shouldRemove</span>          <span class="o">+</span>       <span class="s">&quot; | posAMS.size() = &quot;</span>                   <span class="o">+</span>       <span class="s">&quot;0 &quot;</span>                    <span class="o">+</span>
              <span class="s">&quot; | purpose = &quot;</span>                 <span class="o">+</span> <span class="n">predictedOutcome</span>      <span class="o">+</span>       <span class="s">&quot; | SMA.contains(newState) = &quot;</span>  <span class="o">+</span>       <span class="n">bool</span>                    <span class="o">+</span>
              <span class="s">&quot; | count0 = &quot;</span>                          <span class="o">+</span>       <span class="n">count0</span>                          <span class="o">+</span>
              <span class="s">&quot; | NOT INCONSISTENCY ANYMORE }&quot;</span><span class="o">);</span>
        <span class="k">if</span><span class="o">(</span><span class="n">possibles</span> <span class="o">!=</span> <span class="kc">null</span><span class="o">)</span> <span class="o">{</span>

          <span class="c1">//**************************************************************//</span>
          <span class="c1">//                                                              //</span>
          <span class="c1">//  code for removal of all possible states here (see Case 8)   //</span>
          <span class="c1">//                                                              //</span>
          <span class="c1">//**************************************************************//</span>

          <span class="k">if</span><span class="o">(</span><span class="n">found</span> <span class="o">==</span> <span class="kc">false</span><span class="o">)</span>
          <span class="o">{</span>
            <span class="n">logEvent</span><span class="o">(</span> <span class="s">&quot;receiveDisseminatorReport&quot;</span><span class="o">,</span> <span class="s">&quot;case&quot;</span><span class="o">,</span> <span class="s">&quot;8.1&quot;</span> <span class="o">);</span>
            <span class="k">this</span><span class="o">.</span><span class="na">log</span><span class="o">(</span><span class="mi">1</span><span class="o">,</span><span class="s">&quot;8.1. CURRENT STATE { &quot;</span> <span class="o">+</span>
                  <span class="s">&quot; positiveAMD = &quot;</span>           <span class="o">+</span> <span class="n">positiveAMD</span>           <span class="o">+</span>       <span class="s">&quot; | positiveDMA = &quot;</span>             <span class="o">+</span>       <span class="n">positiveDMA</span> <span class="o">+</span>
                  <span class="s">&quot; | shouldRemove = &quot;</span>                <span class="o">+</span> <span class="n">shouldRemove</span>          <span class="o">+</span>       <span class="s">&quot; | posAMS.size() = &quot;</span>   <span class="o">+</span>       <span class="s">&quot; 0 &quot;</span>           <span class="o">+</span>
                  <span class="s">&quot; | purpose = &quot;</span>                     <span class="o">+</span> <span class="n">predictedOutcome</span>      <span class="o">+</span>
                  <span class="s">&quot; | count1 = &quot;</span>                              <span class="o">+</span>       <span class="n">count1</span>                          <span class="o">+</span>
                  <span class="s">&quot; | possibles == null ? &quot;</span>   <span class="o">+</span> <span class="o">(</span><span class="n">possibles</span><span class="o">==</span><span class="kc">null</span><span class="o">)</span>     <span class="o">+</span>       <span class="s">&quot; | NOTHING REMOVED }&quot;</span><span class="o">);</span>
          <span class="o">}</span>
</pre></div>
</td></tr></table></div>
<table border="1" class="docutils">
<colgroup>
<col width="20%" />
<col width="80%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Line number</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>line 1</td>
<td><ol class="first last arabic simple">
<li>Peers have communicated before (start time = Big Bang)</li>
</ol>
</td>
</tr>
<tr class="row-odd"><td>line 9</td>
<td><ol class="first last arabic simple" start="2">
<li>No entries in the list of states that the sending peer think that we
have</li>
</ol>
</td>
</tr>
<tr class="row-even"><td>line 9</td>
<td><ol class="first last arabic simple" start="3">
<li>Sending peer sends an EXPLOITATION</li>
</ol>
</td>
</tr>
<tr class="row-odd"><td>line 18</td>
<td><ol class="first last arabic simple" start="4">
<li>New selected state is NOT in our aggregation</li>
</ol>
</td>
</tr>
<tr class="row-even"><td>line 29</td>
<td><ol class="first last arabic simple" start="5">
<li>Sending peer sent it’s possible states</li>
</ol>
</td>
</tr>
<tr class="row-odd"><td>line 33</td>
<td>Remove all possible states of the sending peer from our aggregator</td>
</tr>
<tr class="row-even"><td>line 37</td>
<td>None of the possible states were found in our aggregator</td>
</tr>
</tbody>
</table>
<p><strong>Encoding:</strong></p>
<blockquote>
<div><div class="line-block">
<div class="line">Topic Matched = 1</div>
<div class="line">positiveAMD:1</div>
<div class="line">positiveDMA:1</div>
<div class="line">posAMS.size:0</div>
<div class="line">purpose:EXPLOITATION*</div>
</div>
</div></blockquote>
<p><strong>Notes</strong></p>
<blockquote>
<div><div class="line-block">
<div class="line">* shouldRemove:false</div>
<div class="line">newState = DisseminatorReport.SELECTED_STATE</div>
<div class="line">possibles = DisseminatorReport.ALL_POSSIBLE_STATES</div>
</div>
</div></blockquote>
</div>
<div class="section" id="case-8-2">
<h2>Case 8.2<a class="headerlink" href="#case-8-2" title="Permalink to this headline">¶</a></h2>
<div class="highlight-java notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="k">if</span><span class="o">(</span><span class="n">positiveAMD</span> <span class="o">&amp;&amp;</span> <span class="n">positive</span> <span class="n">DMA</span><span class="o">)</span>
<span class="o">{</span>
  <span class="k">if</span><span class="o">(</span><span class="n">posAMS</span><span class="o">.</span><span class="na">size</span><span class="o">()</span> <span class="o">==</span> <span class="mi">1</span><span class="o">)</span>
  <span class="o">{</span>
    <span class="c1">// Not executed in case 8.2, omitted here</span>
  <span class="o">}</span>
  <span class="k">else</span>
  <span class="o">{</span>
    <span class="k">if</span><span class="o">(</span><span class="n">posAMS</span><span class="o">.</span><span class="na">size</span><span class="o">()</span> <span class="o">==</span> <span class="mi">0</span> <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="n">shouldRemove</span><span class="o">)</span>
    <span class="o">{</span>
      <span class="n">AMSAddition</span> <span class="o">=</span> <span class="n">newState</span><span class="o">;</span>
      <span class="n">AMSRemoval</span> <span class="o">=</span> <span class="kc">null</span><span class="o">;</span>
      <span class="kt">boolean</span> <span class="n">bool</span> <span class="o">=</span> <span class="k">this</span><span class="o">.</span><span class="na">SMA</span><span class="o">.</span><span class="na">contains</span><span class="o">(</span><span class="n">newState</span><span class="o">.</span><span class="na">getStateId</span><span class="o">().</span><span class="na">toString</span><span class="o">());</span>
      <span class="k">if</span><span class="o">(</span><span class="n">bool</span><span class="o">)</span>
      <span class="o">{</span>
        <span class="c1">// Not executed in case 8.2, omitted here</span>
      <span class="o">}</span>
      <span class="k">else</span>
      <span class="o">{</span>
        <span class="kt">double</span> <span class="n">count0</span> <span class="o">=</span> <span class="o">(</span><span class="n">Double</span><span class="o">)</span><span class="k">this</span><span class="o">.</span><span class="na">aggregates</span><span class="o">.</span><span class="na">getAggregate</span><span class="o">(</span><span class="n">AggregationFunction</span><span class="o">.</span><span class="na">COUNT</span><span class="o">);</span>

        <span class="n">logEvent</span><span class="o">(</span> <span class="s">&quot;receiveDisseminatorReport&quot;</span><span class="o">,</span> <span class="s">&quot;case&quot;</span><span class="o">,</span> <span class="s">&quot;8&quot;</span> <span class="o">);</span>
        <span class="k">this</span><span class="o">.</span><span class="na">log</span><span class="o">(</span><span class="mi">1</span><span class="o">,</span><span class="s">&quot;8. CURRENT STATE { &quot;</span> <span class="o">+</span>
              <span class="s">&quot; positiveAMD = &quot;</span>       <span class="o">+</span> <span class="n">positiveAMD</span>           <span class="o">+</span>       <span class="s">&quot; | positiveDMA = &quot;</span>                     <span class="o">+</span>       <span class="n">positiveDMA</span>     <span class="o">+</span>
              <span class="s">&quot; | shouldRemove = &quot;</span>    <span class="o">+</span> <span class="n">shouldRemove</span>          <span class="o">+</span>       <span class="s">&quot; | posAMS.size() = &quot;</span>                   <span class="o">+</span>       <span class="s">&quot;0 &quot;</span>                    <span class="o">+</span>
              <span class="s">&quot; | purpose = &quot;</span>                 <span class="o">+</span> <span class="n">predictedOutcome</span>      <span class="o">+</span>       <span class="s">&quot; | SMA.contains(newState) = &quot;</span>  <span class="o">+</span>       <span class="n">bool</span>                    <span class="o">+</span>
              <span class="s">&quot; | count0 = &quot;</span>                          <span class="o">+</span>       <span class="n">count0</span>                          <span class="o">+</span>
              <span class="s">&quot; | NOT INCONSISTENCY ANYMORE }&quot;</span><span class="o">);</span>
        <span class="k">if</span><span class="o">(</span><span class="n">possibles</span> <span class="o">!=</span> <span class="kc">null</span><span class="o">)</span> <span class="o">{</span>

          <span class="c1">//**************************************************************//</span>
          <span class="c1">//                                                              //</span>
          <span class="c1">//  code for removal of all possible states here (see Case 8)   //</span>
          <span class="c1">//                                                              //</span>
          <span class="c1">//**************************************************************//</span>

          <span class="k">if</span><span class="o">(</span><span class="n">found</span> <span class="o">==</span> <span class="kc">false</span><span class="o">)</span>
          <span class="o">{</span>
            <span class="c1">// Not executed int Case 8.2, omitted here</span>
          <span class="o">}</span>
          <span class="k">else</span>
          <span class="o">{</span>
            <span class="n">logEvent</span><span class="o">(</span> <span class="s">&quot;receiveDisseminatorReport&quot;</span><span class="o">,</span> <span class="s">&quot;case&quot;</span><span class="o">,</span> <span class="s">&quot;8.2&quot;</span> <span class="o">);</span>
            <span class="k">this</span><span class="o">.</span><span class="na">log</span><span class="o">(</span><span class="mi">1</span><span class="o">,</span><span class="s">&quot;8.2. CURRENT STATE { &quot;</span> <span class="o">+</span>
                  <span class="s">&quot; positiveAMD = &quot;</span>           <span class="o">+</span> <span class="n">positiveAMD</span>           <span class="o">+</span>       <span class="s">&quot; | positiveDMA = &quot;</span>             <span class="o">+</span>       <span class="n">positiveDMA</span> <span class="o">+</span>
                  <span class="s">&quot; | shouldRemove = &quot;</span>                <span class="o">+</span> <span class="n">shouldRemove</span>          <span class="o">+</span>       <span class="s">&quot; | posAMS.size() = &quot;</span>   <span class="o">+</span>       <span class="s">&quot; 0 &quot;</span>           <span class="o">+</span>
                  <span class="s">&quot; | purpose = &quot;</span>                     <span class="o">+</span> <span class="n">predictedOutcome</span>      <span class="o">+</span>
                  <span class="s">&quot; | count1 = &quot;</span>                              <span class="o">+</span>       <span class="n">count1</span>                          <span class="o">+</span>
                  <span class="s">&quot; | possibles == null ? &quot;</span>   <span class="o">+</span> <span class="o">(</span><span class="n">possibles</span><span class="o">==</span><span class="kc">null</span><span class="o">)</span>     <span class="o">+</span>       <span class="s">&quot; | STATES REMOVED FROM SMA }&quot;</span><span class="o">);</span>
          <span class="o">}</span>
</pre></div>
</td></tr></table></div>
<table border="1" class="docutils">
<colgroup>
<col width="20%" />
<col width="80%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Line number</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>line 1</td>
<td><ol class="first last arabic simple">
<li>Peers have communicated before (start time = Big Bang)</li>
</ol>
</td>
</tr>
<tr class="row-odd"><td>line 9</td>
<td><ol class="first last arabic simple" start="2">
<li>No entries in the list of states that the sending peer think that we
have</li>
</ol>
</td>
</tr>
<tr class="row-even"><td>line 9</td>
<td><ol class="first last arabic simple" start="3">
<li>Sending peer sends an EXPLOITATION</li>
</ol>
</td>
</tr>
<tr class="row-odd"><td>line 18</td>
<td><ol class="first last arabic simple" start="4">
<li>New selected state is NOT in our aggregation</li>
</ol>
</td>
</tr>
<tr class="row-even"><td>line 29</td>
<td><ol class="first last arabic simple" start="5">
<li>Sending peer sent it’s possible states</li>
</ol>
</td>
</tr>
<tr class="row-odd"><td>line 33</td>
<td>Remove all possible states of the sending peer from our aggregator</td>
</tr>
<tr class="row-even"><td>line 41</td>
<td>At least one of the possible states was found in the Aggregator</td>
</tr>
</tbody>
</table>
<p><strong>Encoding:</strong></p>
<blockquote>
<div><div class="line-block">
<div class="line">Topic Matched = 1</div>
<div class="line">positiveAMD:1</div>
<div class="line">positiveDMA:1</div>
<div class="line">posAMS.size:0</div>
<div class="line">purpose:EXPLOITATION*</div>
</div>
</div></blockquote>
<p><strong>Notes</strong></p>
<blockquote>
<div><div class="line-block">
<div class="line">* shouldRemove:false</div>
<div class="line">newState = DisseminatorReport.SELECTED_STATE</div>
<div class="line">possibles = DisseminatorReport.ALL_POSSIBLE_STATES</div>
</div>
</div></blockquote>
</div>
<div class="section" id="case-8-3">
<h2>Case 8.3<a class="headerlink" href="#case-8-3" title="Permalink to this headline">¶</a></h2>
<div class="highlight-java notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="k">if</span><span class="o">(</span><span class="n">positiveAMD</span> <span class="o">&amp;&amp;</span> <span class="n">positive</span> <span class="n">DMA</span><span class="o">)</span>
<span class="o">{</span>
  <span class="k">if</span><span class="o">(</span><span class="n">posAMS</span><span class="o">.</span><span class="na">size</span><span class="o">()</span> <span class="o">==</span> <span class="mi">1</span><span class="o">)</span>
  <span class="o">{</span>
    <span class="c1">// Not executed in case 8.3, omitted here</span>
  <span class="o">}</span>
  <span class="k">else</span>
  <span class="o">{</span>
    <span class="k">if</span><span class="o">(</span><span class="n">posAMS</span><span class="o">.</span><span class="na">size</span><span class="o">()</span> <span class="o">==</span> <span class="mi">0</span> <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="n">shouldRemove</span><span class="o">)</span>
    <span class="o">{</span>
      <span class="n">AMSAddition</span> <span class="o">=</span> <span class="n">newState</span><span class="o">;</span>
      <span class="n">AMSRemoval</span> <span class="o">=</span> <span class="kc">null</span><span class="o">;</span>
      <span class="kt">boolean</span> <span class="n">bool</span> <span class="o">=</span> <span class="k">this</span><span class="o">.</span><span class="na">SMA</span><span class="o">.</span><span class="na">contains</span><span class="o">(</span><span class="n">newState</span><span class="o">.</span><span class="na">getStateId</span><span class="o">().</span><span class="na">toString</span><span class="o">());</span>
      <span class="k">if</span><span class="o">(</span><span class="n">bool</span><span class="o">)</span>
      <span class="o">{</span>
        <span class="c1">// Not executed in case 8.3, omitted here</span>
      <span class="o">}</span>
      <span class="k">else</span>
      <span class="o">{</span>
        <span class="kt">double</span> <span class="n">count0</span> <span class="o">=</span> <span class="o">(</span><span class="n">Double</span><span class="o">)</span><span class="k">this</span><span class="o">.</span><span class="na">aggregates</span><span class="o">.</span><span class="na">getAggregate</span><span class="o">(</span><span class="n">AggregationFunction</span><span class="o">.</span><span class="na">COUNT</span><span class="o">);</span>

        <span class="n">logEvent</span><span class="o">(</span> <span class="s">&quot;receiveDisseminatorReport&quot;</span><span class="o">,</span> <span class="s">&quot;case&quot;</span><span class="o">,</span> <span class="s">&quot;8&quot;</span> <span class="o">);</span>
        <span class="k">this</span><span class="o">.</span><span class="na">log</span><span class="o">(</span><span class="mi">1</span><span class="o">,</span><span class="s">&quot;8. CURRENT STATE { &quot;</span> <span class="o">+</span>
              <span class="s">&quot; positiveAMD = &quot;</span>       <span class="o">+</span> <span class="n">positiveAMD</span>           <span class="o">+</span>       <span class="s">&quot; | positiveDMA = &quot;</span>                     <span class="o">+</span>       <span class="n">positiveDMA</span>     <span class="o">+</span>
              <span class="s">&quot; | shouldRemove = &quot;</span>    <span class="o">+</span> <span class="n">shouldRemove</span>          <span class="o">+</span>       <span class="s">&quot; | posAMS.size() = &quot;</span>                   <span class="o">+</span>       <span class="s">&quot;0 &quot;</span>                    <span class="o">+</span>
              <span class="s">&quot; | purpose = &quot;</span>                 <span class="o">+</span> <span class="n">predictedOutcome</span>      <span class="o">+</span>       <span class="s">&quot; | SMA.contains(newState) = &quot;</span>  <span class="o">+</span>       <span class="n">bool</span>                    <span class="o">+</span>
              <span class="s">&quot; | count0 = &quot;</span>                          <span class="o">+</span>       <span class="n">count0</span>                          <span class="o">+</span>
              <span class="s">&quot; | NOT INCONSISTENCY ANYMORE }&quot;</span><span class="o">);</span>
        <span class="k">if</span><span class="o">(</span><span class="n">possibles</span> <span class="o">!=</span> <span class="kc">null</span><span class="o">)</span> <span class="o">{</span>

          <span class="c1">//************************************************************************//</span>
          <span class="c1">//                                                                        //</span>
          <span class="c1">//  code for removal of all possible states here (see cases 8.1 and 8.2)  //</span>
          <span class="c1">//                                                                        //</span>
          <span class="c1">//************************************************************************//</span>

          <span class="n">AMSAddition</span> <span class="o">=</span> <span class="n">newState</span><span class="o">;</span>
          <span class="kt">boolean</span> <span class="n">SMAbool</span> <span class="o">=</span> <span class="k">this</span><span class="o">.</span><span class="na">addSMAMembership</span><span class="o">(</span><span class="n">newState</span><span class="o">);</span> <span class="c1">// returns true if the selected state membership is added in the SMA bloom filter</span>
          <span class="k">if</span><span class="o">(</span><span class="n">SMAbool</span><span class="o">)</span>
          <span class="o">{</span>
            <span class="k">this</span><span class="o">.</span><span class="na">addAggregationState</span><span class="o">(</span><span class="n">newState</span><span class="o">);</span>
            <span class="n">outcome</span> <span class="o">=</span> <span class="n">AggregationOutcome</span><span class="o">.</span><span class="na">FIRST</span><span class="o">;</span>
            <span class="n">ack</span> <span class="o">=</span> <span class="kc">true</span><span class="o">;</span>
            <span class="n">logEvent</span><span class="o">(</span> <span class="s">&quot;receiveDisseminatorReport&quot;</span><span class="o">,</span> <span class="s">&quot;case&quot;</span><span class="o">,</span> <span class="s">&quot;8.3&quot;</span> <span class="o">);</span>

            <span class="kt">double</span> <span class="n">count2</span> <span class="o">=</span> <span class="o">(</span><span class="n">Double</span><span class="o">)</span><span class="k">this</span><span class="o">.</span><span class="na">aggregates</span><span class="o">.</span><span class="na">getAggregate</span><span class="o">(</span><span class="n">AggregationFunction</span><span class="o">.</span><span class="na">COUNT</span><span class="o">);</span>
            <span class="k">this</span><span class="o">.</span><span class="na">log</span><span class="o">(</span><span class="mi">1</span><span class="o">,</span><span class="s">&quot;8.3. CURRENT STATE { &quot;</span> <span class="o">+</span>
                  <span class="s">&quot; positiveAMD = &quot;</span>           <span class="o">+</span> <span class="n">positiveAMD</span>           <span class="o">+</span>       <span class="s">&quot; | positiveDMA = &quot;</span>             <span class="o">+</span>       <span class="n">positiveDMA</span> <span class="o">+</span>
                  <span class="s">&quot; | shouldRemove = &quot;</span>                <span class="o">+</span> <span class="n">shouldRemove</span>          <span class="o">+</span>       <span class="s">&quot; | posAMS.size() = &quot;</span>   <span class="o">+</span>       <span class="s">&quot; 0 &quot;</span>           <span class="o">+</span>
                  <span class="s">&quot; | purpose = &quot;</span>                     <span class="o">+</span> <span class="n">predictedOutcome</span>      <span class="o">+</span>       <span class="s">&quot; | addSMAMembership(newState) = &quot;</span>      <span class="o">+</span> <span class="n">SMAbool</span>       <span class="o">+</span>
                  <span class="s">&quot; | count2 = &quot;</span>                              <span class="o">+</span>       <span class="n">count2</span>                          <span class="o">+</span>
                  <span class="s">&quot; | possibles == null ? &quot;</span>   <span class="o">+</span> <span class="o">(</span><span class="n">possibles</span><span class="o">==</span><span class="kc">null</span><span class="o">)</span>     <span class="o">+</span>       <span class="s">&quot; | OUTCOME = EXPLOITATION }&quot;</span><span class="o">);</span>
          <span class="o">}</span>
</pre></div>
</td></tr></table></div>
<table border="1" class="docutils">
<colgroup>
<col width="20%" />
<col width="80%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Line number</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>line 1</td>
<td><ol class="first last arabic simple">
<li>Peers have communicated before (start time = Big Bang)</li>
</ol>
</td>
</tr>
<tr class="row-odd"><td>line 9</td>
<td><ol class="first last arabic simple" start="2">
<li>No entries in the list of states that the sending peer think that we
have</li>
</ol>
</td>
</tr>
<tr class="row-even"><td>line 9</td>
<td><ol class="first last arabic simple" start="3">
<li>Sending peer sends an EXPLOITATION</li>
</ol>
</td>
</tr>
<tr class="row-odd"><td>line 18</td>
<td><ol class="first last arabic simple" start="4">
<li>New selected state is NOT in our aggregation</li>
</ol>
</td>
</tr>
<tr class="row-even"><td>line 29</td>
<td><ol class="first last arabic simple" start="5">
<li>Sending peer sent it’s possible states</li>
</ol>
</td>
</tr>
<tr class="row-odd"><td>line 33</td>
<td>Remove all possible states of the sending peer from our aggregator</td>
</tr>
<tr class="row-even"><td>line 39</td>
<td><ol class="first last arabic simple" start="6">
<li>True means the new selected state was not yet in our SMA</li>
</ol>
</td>
</tr>
</tbody>
</table>
<p><strong>Encoding:</strong></p>
<blockquote>
<div><div class="line-block">
<div class="line">Topic Matched = 1</div>
<div class="line">positiveAMD:1</div>
<div class="line">positiveDMA:1</div>
<div class="line">posAMS.size:0</div>
<div class="line">purpose:EXPLOITATION*</div>
</div>
</div></blockquote>
<p><strong>Notes</strong></p>
<blockquote>
<div><div class="line-block">
<div class="line">* shouldRemove:false</div>
<div class="line">newState = DisseminatorReport.SELECTED_STATE</div>
<div class="line">possibles = DisseminatorReport.ALL_POSSIBLE_STATES</div>
</div>
</div></blockquote>
</div>
<div class="section" id="case-8-4">
<h2>Case 8.4<a class="headerlink" href="#case-8-4" title="Permalink to this headline">¶</a></h2>
<div class="highlight-java notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="k">if</span><span class="o">(</span><span class="n">positiveAMD</span> <span class="o">&amp;&amp;</span> <span class="n">positive</span> <span class="n">DMA</span><span class="o">)</span>
<span class="o">{</span>
  <span class="k">if</span><span class="o">(</span><span class="n">posAMS</span><span class="o">.</span><span class="na">size</span><span class="o">()</span> <span class="o">==</span> <span class="mi">1</span><span class="o">)</span>
  <span class="o">{</span>
    <span class="c1">// Not executed in case 8.4, omitted here</span>
  <span class="o">}</span>
  <span class="k">else</span>
  <span class="o">{</span>
    <span class="k">if</span><span class="o">(</span><span class="n">posAMS</span><span class="o">.</span><span class="na">size</span><span class="o">()</span> <span class="o">==</span> <span class="mi">0</span> <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="n">shouldRemove</span><span class="o">)</span>
    <span class="o">{</span>
      <span class="n">AMSAddition</span> <span class="o">=</span> <span class="n">newState</span><span class="o">;</span>
      <span class="n">AMSRemoval</span> <span class="o">=</span> <span class="kc">null</span><span class="o">;</span>
      <span class="kt">boolean</span> <span class="n">bool</span> <span class="o">=</span> <span class="k">this</span><span class="o">.</span><span class="na">SMA</span><span class="o">.</span><span class="na">contains</span><span class="o">(</span><span class="n">newState</span><span class="o">.</span><span class="na">getStateId</span><span class="o">().</span><span class="na">toString</span><span class="o">());</span>
      <span class="k">if</span><span class="o">(</span><span class="n">bool</span><span class="o">)</span>
      <span class="o">{</span>
        <span class="c1">// Not executed in case 8.4, omitted here</span>
      <span class="o">}</span>
      <span class="k">else</span>
      <span class="o">{</span>
        <span class="kt">double</span> <span class="n">count0</span> <span class="o">=</span> <span class="o">(</span><span class="n">Double</span><span class="o">)</span><span class="k">this</span><span class="o">.</span><span class="na">aggregates</span><span class="o">.</span><span class="na">getAggregate</span><span class="o">(</span><span class="n">AggregationFunction</span><span class="o">.</span><span class="na">COUNT</span><span class="o">);</span>

        <span class="n">logEvent</span><span class="o">(</span> <span class="s">&quot;receiveDisseminatorReport&quot;</span><span class="o">,</span> <span class="s">&quot;case&quot;</span><span class="o">,</span> <span class="s">&quot;8&quot;</span> <span class="o">);</span>
        <span class="k">this</span><span class="o">.</span><span class="na">log</span><span class="o">(</span><span class="mi">1</span><span class="o">,</span><span class="s">&quot;8. CURRENT STATE { &quot;</span> <span class="o">+</span>
              <span class="s">&quot; positiveAMD = &quot;</span>       <span class="o">+</span> <span class="n">positiveAMD</span>           <span class="o">+</span>       <span class="s">&quot; | positiveDMA = &quot;</span>                     <span class="o">+</span>       <span class="n">positiveDMA</span>     <span class="o">+</span>
              <span class="s">&quot; | shouldRemove = &quot;</span>    <span class="o">+</span> <span class="n">shouldRemove</span>          <span class="o">+</span>       <span class="s">&quot; | posAMS.size() = &quot;</span>                   <span class="o">+</span>       <span class="s">&quot;0 &quot;</span>                    <span class="o">+</span>
              <span class="s">&quot; | purpose = &quot;</span>                 <span class="o">+</span> <span class="n">predictedOutcome</span>      <span class="o">+</span>       <span class="s">&quot; | SMA.contains(newState) = &quot;</span>  <span class="o">+</span>       <span class="n">bool</span>                    <span class="o">+</span>
              <span class="s">&quot; | count0 = &quot;</span>                          <span class="o">+</span>       <span class="n">count0</span>                          <span class="o">+</span>
              <span class="s">&quot; | NOT INCONSISTENCY ANYMORE }&quot;</span><span class="o">);</span>
        <span class="k">if</span><span class="o">(</span><span class="n">possibles</span> <span class="o">!=</span> <span class="kc">null</span><span class="o">)</span> <span class="o">{</span>

          <span class="c1">//************************************************************************//</span>
          <span class="c1">//                                                                        //</span>
          <span class="c1">//  code for removal of all possible states here (see cases 8.1 and 8.2)  //</span>
          <span class="c1">//                                                                        //</span>
          <span class="c1">//************************************************************************//</span>

          <span class="n">AMSAddition</span> <span class="o">=</span> <span class="n">newState</span><span class="o">;</span>
          <span class="kt">boolean</span> <span class="n">SMAbool</span> <span class="o">=</span> <span class="k">this</span><span class="o">.</span><span class="na">addSMAMembership</span><span class="o">(</span><span class="n">newState</span><span class="o">);</span> <span class="c1">// returns true if the selected state membership is added in the SMA bloom filter</span>
          <span class="k">if</span><span class="o">(</span><span class="n">SMAbool</span><span class="o">)</span>
          <span class="o">{</span>
            <span class="c1">// Not executed in case 8.4, omitted here</span>
          <span class="o">}</span>
          <span class="k">else</span>
          <span class="o">{</span>
            <span class="n">logEvent</span><span class="o">(</span> <span class="s">&quot;receiveDisseminatorReport&quot;</span><span class="o">,</span> <span class="s">&quot;case&quot;</span><span class="o">,</span> <span class="s">&quot;8.4&quot;</span> <span class="o">);</span>
            <span class="k">this</span><span class="o">.</span><span class="na">log</span><span class="o">(</span><span class="mi">1</span><span class="o">,</span><span class="s">&quot;8.4. CURRENT STATE { &quot;</span> <span class="o">+</span>
                  <span class="s">&quot; positiveAMD = &quot;</span>           <span class="o">+</span> <span class="n">positiveAMD</span>           <span class="o">+</span>       <span class="s">&quot; | positiveDMA = &quot;</span>             <span class="o">+</span>       <span class="n">positiveDMA</span> <span class="o">+</span>
                  <span class="s">&quot; | shouldRemove = &quot;</span>                <span class="o">+</span> <span class="n">shouldRemove</span>          <span class="o">+</span>       <span class="s">&quot; | posAMS.size() = &quot;</span>   <span class="o">+</span>       <span class="s">&quot; 0 &quot;</span>           <span class="o">+</span>
                  <span class="s">&quot; | purpose = &quot;</span>                     <span class="o">+</span> <span class="n">predictedOutcome</span>      <span class="o">+</span>       <span class="s">&quot; | addSMAMembership(newState) = &quot;</span>      <span class="o">+</span>       <span class="n">SMAbool</span> <span class="o">+</span>
                  <span class="s">&quot; | possibles == null ? &quot;</span>   <span class="o">+</span> <span class="o">(</span><span class="n">possibles</span><span class="o">==</span><span class="kc">null</span><span class="o">)</span>     <span class="o">+</span>       <span class="s">&quot; | OUTCOME = INCONSISTENCY }&quot;</span><span class="o">);</span>
            <span class="n">outcome</span> <span class="o">=</span> <span class="n">AggregationOutcome</span><span class="o">.</span><span class="na">UNSUCCESSFUL</span><span class="o">;</span>
            <span class="n">ack</span> <span class="o">=</span> <span class="kc">false</span><span class="o">;</span>
          <span class="o">}</span>
</pre></div>
</td></tr></table></div>
<table border="1" class="docutils">
<colgroup>
<col width="20%" />
<col width="80%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Line number</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>line 1</td>
<td><ol class="first last arabic simple">
<li>Peers have communicated before (start time = Big Bang)</li>
</ol>
</td>
</tr>
<tr class="row-odd"><td>line 9</td>
<td><ol class="first last arabic simple" start="2">
<li>No entries in the list of states that the sending peer think that we
have</li>
</ol>
</td>
</tr>
<tr class="row-even"><td>line 9</td>
<td><ol class="first last arabic simple" start="3">
<li>Sending peer sends an EXPLOITATION</li>
</ol>
</td>
</tr>
<tr class="row-odd"><td>line 18</td>
<td><ol class="first last arabic simple" start="4">
<li>New selected state is NOT in our aggregation</li>
</ol>
</td>
</tr>
<tr class="row-even"><td>line 29</td>
<td><ol class="first last arabic simple" start="5">
<li>Sending peer sent it’s possible states</li>
</ol>
</td>
</tr>
<tr class="row-odd"><td>line 33</td>
<td>Remove all possible states of the sending peer from our aggregator</td>
</tr>
<tr class="row-even"><td>line 43</td>
<td><ol class="first last arabic simple" start="6">
<li>New selected state was already in our SMA</li>
</ol>
</td>
</tr>
</tbody>
</table>
<p><strong>Encoding:</strong></p>
<blockquote>
<div><div class="line-block">
<div class="line">Topic Matched = 1</div>
<div class="line">positiveAMD:1</div>
<div class="line">positiveDMA:1</div>
<div class="line">posAMS.size:0</div>
<div class="line">purpose:EXPLOITATION*</div>
</div>
</div></blockquote>
<p><strong>Notes</strong></p>
<blockquote>
<div><div class="line-block">
<div class="line">* shouldRemove:false</div>
<div class="line">newState = DisseminatorReport.SELECTED_STATE</div>
<div class="line">possibles = DisseminatorReport.ALL_POSSIBLE_STATES</div>
</div>
</div></blockquote>
</div>
<div class="section" id="case-8-5">
<h2>Case 8.5<a class="headerlink" href="#case-8-5" title="Permalink to this headline">¶</a></h2>
<div class="highlight-java notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="k">if</span><span class="o">(</span><span class="n">positiveAMD</span> <span class="o">&amp;&amp;</span> <span class="n">positive</span> <span class="n">DMA</span><span class="o">)</span>
<span class="o">{</span>
  <span class="k">if</span><span class="o">(</span><span class="n">posAMS</span><span class="o">.</span><span class="na">size</span><span class="o">()</span> <span class="o">==</span> <span class="mi">1</span><span class="o">)</span>
  <span class="o">{</span>
    <span class="c1">// Not executed in case 8.5, omitted here</span>
  <span class="o">}</span>
  <span class="k">else</span>
  <span class="o">{</span>
    <span class="k">if</span><span class="o">(</span><span class="n">posAMS</span><span class="o">.</span><span class="na">size</span><span class="o">()</span> <span class="o">==</span> <span class="mi">0</span> <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="n">shouldRemove</span><span class="o">)</span>
    <span class="o">{</span>
      <span class="n">AMSAddition</span> <span class="o">=</span> <span class="n">newState</span><span class="o">;</span>
      <span class="n">AMSRemoval</span> <span class="o">=</span> <span class="kc">null</span><span class="o">;</span>
      <span class="kt">boolean</span> <span class="n">bool</span> <span class="o">=</span> <span class="k">this</span><span class="o">.</span><span class="na">SMA</span><span class="o">.</span><span class="na">contains</span><span class="o">(</span><span class="n">newState</span><span class="o">.</span><span class="na">getStateId</span><span class="o">().</span><span class="na">toString</span><span class="o">());</span>
      <span class="k">if</span><span class="o">(</span><span class="n">bool</span><span class="o">)</span>
      <span class="o">{</span>
        <span class="c1">// Not executed in case 8.5, omitted here</span>
      <span class="o">}</span>
      <span class="k">else</span>
      <span class="o">{</span>
        <span class="kt">double</span> <span class="n">count0</span> <span class="o">=</span> <span class="o">(</span><span class="n">Double</span><span class="o">)</span><span class="k">this</span><span class="o">.</span><span class="na">aggregates</span><span class="o">.</span><span class="na">getAggregate</span><span class="o">(</span><span class="n">AggregationFunction</span><span class="o">.</span><span class="na">COUNT</span><span class="o">);</span>

        <span class="n">logEvent</span><span class="o">(</span> <span class="s">&quot;receiveDisseminatorReport&quot;</span><span class="o">,</span> <span class="s">&quot;case&quot;</span><span class="o">,</span> <span class="s">&quot;8&quot;</span> <span class="o">);</span>
        <span class="k">this</span><span class="o">.</span><span class="na">log</span><span class="o">(</span><span class="mi">1</span><span class="o">,</span><span class="s">&quot;8. CURRENT STATE { &quot;</span> <span class="o">+</span>
              <span class="s">&quot; positiveAMD = &quot;</span>       <span class="o">+</span> <span class="n">positiveAMD</span>           <span class="o">+</span>       <span class="s">&quot; | positiveDMA = &quot;</span>                     <span class="o">+</span>       <span class="n">positiveDMA</span>     <span class="o">+</span>
              <span class="s">&quot; | shouldRemove = &quot;</span>    <span class="o">+</span> <span class="n">shouldRemove</span>          <span class="o">+</span>       <span class="s">&quot; | posAMS.size() = &quot;</span>                   <span class="o">+</span>       <span class="s">&quot;0 &quot;</span>                    <span class="o">+</span>
              <span class="s">&quot; | purpose = &quot;</span>                 <span class="o">+</span> <span class="n">predictedOutcome</span>      <span class="o">+</span>       <span class="s">&quot; | SMA.contains(newState) = &quot;</span>  <span class="o">+</span>       <span class="n">bool</span>                    <span class="o">+</span>
              <span class="s">&quot; | count0 = &quot;</span>                          <span class="o">+</span>       <span class="n">count0</span>                          <span class="o">+</span>
              <span class="s">&quot; | NOT INCONSISTENCY ANYMORE }&quot;</span><span class="o">);</span>
        <span class="k">if</span><span class="o">(</span><span class="n">possibles</span> <span class="o">!=</span> <span class="kc">null</span><span class="o">)</span> <span class="o">{</span>
          <span class="n">Not</span> <span class="n">executed</span> <span class="n">in</span> <span class="k">case</span> <span class="mf">8.5</span><span class="o">,</span> <span class="n">omitted</span> <span class="n">here</span>
        <span class="o">}</span>
        <span class="k">else</span>
        <span class="o">{</span>
          <span class="n">logEvent</span><span class="o">(</span> <span class="s">&quot;receiveDisseminatorReport&quot;</span><span class="o">,</span> <span class="s">&quot;case&quot;</span><span class="o">,</span> <span class="s">&quot;8.5&quot;</span> <span class="o">);</span>
          <span class="k">this</span><span class="o">.</span><span class="na">log</span><span class="o">(</span><span class="mi">1</span><span class="o">,</span><span class="s">&quot;8.5. CURRENT STATE { &quot;</span> <span class="o">+</span>
                <span class="s">&quot; positiveAMD = &quot;</span>             <span class="o">+</span> <span class="n">positiveAMD</span>           <span class="o">+</span>       <span class="s">&quot; | positiveDMA = &quot;</span>             <span class="o">+</span>       <span class="n">positiveDMA</span> <span class="o">+</span>
                <span class="s">&quot; | shouldRemove = &quot;</span>          <span class="o">+</span> <span class="n">shouldRemove</span>          <span class="o">+</span>       <span class="s">&quot; | posAMS.size() = &quot;</span>   <span class="o">+</span>       <span class="s">&quot; 0 &quot;</span>           <span class="o">+</span>
                <span class="s">&quot; | purpose = &quot;</span>                       <span class="o">+</span> <span class="n">predictedOutcome</span>      <span class="o">+</span>
                <span class="s">&quot; | possibles == null ? &quot;</span>     <span class="o">+</span> <span class="o">(</span><span class="n">possibles</span><span class="o">==</span><span class="kc">null</span><span class="o">)</span>     <span class="o">+</span>       <span class="s">&quot; | NOTHING REMOVED FROM SMA }&quot;</span><span class="o">);</span>
          <span class="n">outcome</span> <span class="o">=</span> <span class="n">AggregationOutcome</span><span class="o">.</span><span class="na">UNSUCCESSFUL</span><span class="o">;</span>
          <span class="n">ack</span> <span class="o">=</span> <span class="kc">false</span><span class="o">;</span>
        <span class="o">}</span>
</pre></div>
</td></tr></table></div>
<table border="1" class="docutils">
<colgroup>
<col width="20%" />
<col width="80%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Line number</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>line 1</td>
<td><ol class="first last arabic simple">
<li>Peers have communicated before (start time = Big Bang)</li>
</ol>
</td>
</tr>
<tr class="row-odd"><td>line 9</td>
<td><ol class="first last arabic simple" start="2">
<li>No entries in the list of states that the sending peer think that we
have</li>
</ol>
</td>
</tr>
<tr class="row-even"><td>line 9</td>
<td><ol class="first last arabic simple" start="3">
<li>Sending peer sends an EXPLOITATION</li>
</ol>
</td>
</tr>
<tr class="row-odd"><td>line 18</td>
<td><ol class="first last arabic simple" start="4">
<li>New selected state is NOT in our aggregation</li>
</ol>
</td>
</tr>
<tr class="row-even"><td>line 32</td>
<td><ol class="first last arabic simple" start="5">
<li>Sending peer did NOT send it’s possible states</li>
</ol>
</td>
</tr>
</tbody>
</table>
<p><strong>Encoding:</strong></p>
<blockquote>
<div><div class="line-block">
<div class="line">Topic Matched = 1</div>
<div class="line">positiveAMD:1</div>
<div class="line">positiveDMA:1</div>
<div class="line">posAMS.size:0</div>
<div class="line">purpose:EXPLOITATION*</div>
</div>
</div></blockquote>
<p><strong>Notes</strong></p>
<blockquote>
<div><div class="line-block">
<div class="line">* shouldRemove:false</div>
<div class="line">newState = DisseminatorReport.SELECTED_STATE</div>
<div class="line">possibles = DisseminatorReport.ALL_POSSIBLE_STATES</div>
</div>
</div></blockquote>
</div>
<div class="section" id="case-9">
<h2>Case 9<a class="headerlink" href="#case-9" title="Permalink to this headline">¶</a></h2>
<div class="highlight-java notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="k">if</span><span class="o">(</span><span class="n">positiveAMD</span> <span class="o">&amp;&amp;</span> <span class="n">positive</span> <span class="n">DMA</span><span class="o">)</span>
<span class="o">{</span>
  <span class="k">if</span><span class="o">(</span><span class="n">posAMS</span><span class="o">.</span><span class="na">size</span><span class="o">()</span> <span class="o">==</span> <span class="mi">1</span><span class="o">)</span>
  <span class="o">{</span>
    <span class="c1">// Not executed in case 9, omitted here</span>
  <span class="o">}</span>
  <span class="k">else</span>
  <span class="o">{</span>
    <span class="k">if</span><span class="o">(</span><span class="n">posAMS</span><span class="o">.</span><span class="na">size</span><span class="o">()</span> <span class="o">==</span> <span class="mi">0</span> <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="n">shouldRemove</span><span class="o">)</span>
    <span class="o">{</span>
      <span class="c1">// Not executed in case 9, omitted here</span>
    <span class="o">}</span>
    <span class="k">else</span>
    <span class="o">{</span>
      <span class="k">if</span><span class="o">(</span><span class="n">posAMS</span><span class="o">.</span><span class="na">size</span><span class="o">()</span> <span class="o">==</span> <span class="mi">0</span> <span class="o">&amp;&amp;</span> <span class="n">shouldRemove</span><span class="o">)</span>
      <span class="o">{</span>
        <span class="n">AMSAddition</span> <span class="o">=</span> <span class="kc">null</span><span class="o">;</span>
        <span class="k">if</span><span class="o">(</span><span class="n">possibles</span> <span class="o">!=</span> <span class="kc">null</span><span class="o">)</span>
        <span class="o">{</span>
          <span class="kt">boolean</span> <span class="n">a</span> <span class="o">=</span> <span class="kc">false</span><span class="o">;</span>
          <span class="k">for</span><span class="o">(</span><span class="n">State</span> <span class="n">state</span> <span class="o">:</span> <span class="n">possibles</span><span class="o">)</span> <span class="o">{</span>
            <span class="k">if</span><span class="o">(</span><span class="k">this</span><span class="o">.</span><span class="na">SMA</span><span class="o">.</span><span class="na">contains</span><span class="o">(</span><span class="n">state</span><span class="o">.</span><span class="na">getStateId</span><span class="o">().</span><span class="na">toString</span><span class="o">()))</span> <span class="o">{</span>
              <span class="k">this</span><span class="o">.</span><span class="na">removeSMAMembership</span><span class="o">(</span><span class="n">state</span><span class="o">);</span>
              <span class="k">this</span><span class="o">.</span><span class="na">removeAggregationState</span><span class="o">(</span><span class="n">state</span><span class="o">);</span>
              <span class="n">AMSRemoval</span> <span class="o">=</span> <span class="n">state</span><span class="o">;</span>
              <span class="n">outcome</span> <span class="o">=</span> <span class="n">AggregationOutcome</span><span class="o">.</span><span class="na">REMOVAL</span><span class="o">;</span>
              <span class="n">ack</span> <span class="o">=</span> <span class="kc">true</span><span class="o">;</span>
              <span class="n">a</span> <span class="o">=</span> <span class="kc">true</span><span class="o">;</span>
              <span class="k">this</span><span class="o">.</span><span class="na">log</span><span class="o">(</span> <span class="s">&quot;#####################&quot;</span><span class="o">);</span>
              <span class="k">break</span><span class="o">;</span>
            <span class="o">}</span>
          <span class="o">}</span>
          <span class="k">if</span><span class="o">(</span><span class="n">a</span> <span class="o">==</span> <span class="kc">false</span><span class="o">)</span>
          <span class="o">{</span>
            <span class="n">logEvent</span><span class="o">(</span> <span class="s">&quot;receiveDisseminatorReport&quot;</span><span class="o">,</span> <span class="s">&quot;case&quot;</span><span class="o">,</span> <span class="s">&quot;9&quot;</span> <span class="o">);</span>
            <span class="k">this</span><span class="o">.</span><span class="na">log</span><span class="o">(</span><span class="mi">1</span><span class="o">,</span><span class="s">&quot;9. CURRENT STATE { &quot;</span> <span class="o">+</span>
                  <span class="s">&quot; positiveAMD = &quot;</span>   <span class="o">+</span> <span class="n">positiveAMD</span>           <span class="o">+</span>       <span class="s">&quot; | positiveDMA = &quot;</span>                     <span class="o">+</span>       <span class="n">positiveDMA</span>     <span class="o">+</span>
                  <span class="s">&quot; | shouldRemove = &quot;</span>        <span class="o">+</span> <span class="n">shouldRemove</span>          <span class="o">+</span>       <span class="s">&quot; | posAMS.size() = &quot;</span>                   <span class="o">+</span>       <span class="s">&quot; 0 &quot;</span>                   <span class="o">+</span>
                  <span class="s">&quot; | purpose = &quot;</span>             <span class="o">+</span> <span class="n">predictedOutcome</span>      <span class="o">+</span>       <span class="s">&quot; | possibles == null ? &quot;</span>       <span class="o">+</span>       <span class="o">(</span><span class="n">possibles</span><span class="o">==</span><span class="kc">null</span><span class="o">)</span>       <span class="o">+</span>
                  <span class="s">&quot; | NOTHING WAS REMOVED }&quot;</span><span class="o">);</span>
            <span class="o">}</span>
          <span class="o">}</span>
</pre></div>
</td></tr></table></div>
<table border="1" class="docutils">
<colgroup>
<col width="17%" />
<col width="83%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Line number</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>line 1</td>
<td><ol class="first last arabic simple">
<li>Peers have communicated before (start time = Big Bang)</li>
</ol>
</td>
</tr>
<tr class="row-odd"><td>line 9</td>
<td>shouldRemove (REMOVAL) are only sent by migrated disseminators</td>
</tr>
<tr class="row-even"><td>line 15</td>
<td><ol class="first last arabic simple" start="2">
<li>No entries in the list of states that the sending peer think that we
have</li>
</ol>
</td>
</tr>
<tr class="row-odd"><td>line 15</td>
<td><ol class="first last arabic simple" start="3">
<li>Migrated peer (inside a carrier node) sends a REMOVAL</li>
</ol>
</td>
</tr>
<tr class="row-even"><td>line 18</td>
<td><ol class="first last arabic simple" start="4">
<li>Sending peer sent it’s possible states</li>
</ol>
</td>
</tr>
<tr class="row-odd"><td>line 24</td>
<td><strong>To be safe</strong>, remove all possible states of the sending peer from our
Aggregator</td>
</tr>
<tr class="row-even"><td>line 26</td>
<td><div class="first last line-block">
<div class="line"><strong>To be safe</strong>, inform the sending peer that the aggregator removed something,</div>
<div class="line">even if the sending peer has no entries for our Aggregator (i.e. posAMS is empty)</div>
</div>
</td>
</tr>
<tr class="row-odd"><td>line 33</td>
<td><ol class="first last arabic simple" start="5">
<li>Nothing was removed on our side</li>
</ol>
</td>
</tr>
</tbody>
</table>
<p><strong>Encoding:</strong></p>
<blockquote>
<div><div class="line-block">
<div class="line">Topic Matched = 1</div>
<div class="line">positiveAMD:1</div>
<div class="line">positiveDMA:1</div>
<div class="line">posAMS.size:0</div>
<div class="line">purpose:Not</div>
</div>
</div></blockquote>
<p><strong>Notes</strong></p>
<blockquote>
<div><div class="line-block">
<div class="line">* shouldRemove:false</div>
<div class="line">newState = DisseminatorReport.SELECTED_STATE</div>
<div class="line">possibles = DisseminatorReport.ALL_POSSIBLE_STATES</div>
</div>
</div></blockquote>
</div>
<div class="section" id="case-10">
<h2>Case 10<a class="headerlink" href="#case-10" title="Permalink to this headline">¶</a></h2>
<div class="highlight-java notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="k">if</span><span class="o">(</span><span class="n">positiveAMD</span> <span class="o">&amp;&amp;</span> <span class="n">positive</span> <span class="n">DMA</span><span class="o">)</span>
<span class="o">{</span>
  <span class="k">if</span><span class="o">(</span><span class="n">posAMS</span><span class="o">.</span><span class="na">size</span><span class="o">()</span> <span class="o">==</span> <span class="mi">1</span><span class="o">)</span>
  <span class="o">{</span>
    <span class="c1">// Not executed in case 10, omitted here</span>
  <span class="o">}</span>
  <span class="k">else</span>
  <span class="o">{</span>
    <span class="k">if</span><span class="o">(</span><span class="n">posAMS</span><span class="o">.</span><span class="na">size</span><span class="o">()</span> <span class="o">==</span> <span class="mi">0</span> <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="n">shouldRemove</span><span class="o">)</span>
    <span class="o">{</span>
      <span class="c1">// Not executed in case 10, omitted here</span>
    <span class="o">}</span>
    <span class="k">else</span>
    <span class="o">{</span>
      <span class="k">if</span><span class="o">(</span><span class="n">posAMS</span><span class="o">.</span><span class="na">size</span><span class="o">()</span> <span class="o">==</span> <span class="mi">0</span> <span class="o">&amp;&amp;</span> <span class="n">shouldRemove</span><span class="o">)</span>
      <span class="o">{</span>
        <span class="n">AMSAddition</span> <span class="o">=</span> <span class="kc">null</span><span class="o">;</span>
        <span class="k">if</span><span class="o">(</span><span class="n">possibles</span> <span class="o">!=</span> <span class="kc">null</span><span class="o">)</span>
        <span class="o">{</span>
          <span class="c1">// Not executed in case 10, omitted here</span>
        <span class="o">}</span>
        <span class="k">else</span>
        <span class="o">{</span>
          <span class="n">logEvent</span><span class="o">(</span> <span class="s">&quot;receiveDisseminatorReport&quot;</span><span class="o">,</span> <span class="s">&quot;case&quot;</span><span class="o">,</span> <span class="s">&quot;10&quot;</span> <span class="o">);</span>
          <span class="k">this</span><span class="o">.</span><span class="na">log</span><span class="o">(</span><span class="mi">1</span><span class="o">,</span><span class="s">&quot;10. CURRENT STATE { &quot;</span> <span class="o">+</span>
                <span class="s">&quot; positiveAMD = &quot;</span>     <span class="o">+</span> <span class="n">positiveAMD</span>           <span class="o">+</span>       <span class="s">&quot; | positiveDMA = &quot;</span>                     <span class="o">+</span>       <span class="n">positiveDMA</span>     <span class="o">+</span>
                <span class="s">&quot; | shouldRemove = &quot;</span>  <span class="o">+</span> <span class="n">shouldRemove</span>          <span class="o">+</span>       <span class="s">&quot; | posAMS.size() = &quot;</span>                   <span class="o">+</span>       <span class="s">&quot; 0 &quot;</span>                   <span class="o">+</span>
                <span class="s">&quot; | purpose = &quot;</span>               <span class="o">+</span> <span class="n">predictedOutcome</span>      <span class="o">+</span>       <span class="s">&quot; | possibles == null ? &quot;</span>       <span class="o">+</span>       <span class="o">(</span><span class="n">possibles</span><span class="o">==</span><span class="kc">null</span><span class="o">)</span>       <span class="o">+</span>
                <span class="s">&quot; | NOTHING WAS REMOVED }&quot;</span><span class="o">);</span>
        <span class="o">}</span>
</pre></div>
</td></tr></table></div>
<table border="1" class="docutils">
<colgroup>
<col width="20%" />
<col width="80%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Line number</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>line 1</td>
<td><ol class="first last arabic simple">
<li>Peers have communicated before (start time = Big Bang)</li>
</ol>
</td>
</tr>
<tr class="row-odd"><td>line 9</td>
<td>shouldRemove (REMOVAL) are only sent by migrated disseminators</td>
</tr>
<tr class="row-even"><td>line 15</td>
<td><ol class="first last arabic simple" start="2">
<li>No entries in the list of states that the sending peer think that we
have</li>
</ol>
</td>
</tr>
<tr class="row-odd"><td>line 15</td>
<td><ol class="first last arabic simple" start="3">
<li>Migrated peer (inside a carrier node) sends a REMOVAL</li>
</ol>
</td>
</tr>
<tr class="row-even"><td>line 22</td>
<td><ol class="first last arabic simple" start="4">
<li>Sending peer did not send it’s possible states</li>
</ol>
</td>
</tr>
<tr class="row-odd"><td>line 22</td>
<td>Nothing was removed on our side</td>
</tr>
</tbody>
</table>
<p><strong>Encoding:</strong></p>
<blockquote>
<div><div class="line-block">
<div class="line">Topic Matched = 1</div>
<div class="line">positiveAMD:1</div>
<div class="line">positiveDMA:1</div>
<div class="line">posAMS.size:0</div>
<div class="line">purpose:Not</div>
</div>
</div></blockquote>
<p><strong>Notes</strong></p>
<blockquote>
<div><div class="line-block">
<div class="line">* shouldRemove:false</div>
<div class="line">newState = DisseminatorReport.SELECTED_STATE</div>
<div class="line">possibles = DisseminatorReport.ALL_POSSIBLE_STATES</div>
</div>
</div></blockquote>
</div>
<div class="section" id="case-11">
<h2>Case 11<a class="headerlink" href="#case-11" title="Permalink to this headline">¶</a></h2>
<div class="highlight-java notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="k">if</span><span class="o">(</span><span class="n">positiveAMD</span> <span class="o">&amp;&amp;</span> <span class="n">positive</span> <span class="n">DMA</span><span class="o">)</span>
<span class="o">{</span>
  <span class="k">if</span><span class="o">(</span><span class="n">posAMS</span><span class="o">.</span><span class="na">size</span><span class="o">()</span> <span class="o">==</span> <span class="mi">1</span><span class="o">)</span>
  <span class="o">{</span>
    <span class="c1">// Not executed in case 11, omitted here</span>
  <span class="o">}</span>
  <span class="k">else</span>
  <span class="o">{</span>
    <span class="k">if</span><span class="o">(</span><span class="n">posAMS</span><span class="o">.</span><span class="na">size</span><span class="o">()</span> <span class="o">==</span> <span class="mi">0</span> <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="n">shouldRemove</span><span class="o">)</span>
    <span class="o">{</span>
      <span class="c1">// Not executed in case 11, omitted here</span>
    <span class="o">}</span>
    <span class="k">else</span>
    <span class="o">{</span>
      <span class="k">if</span><span class="o">(</span><span class="n">posAMS</span><span class="o">.</span><span class="na">size</span><span class="o">()</span> <span class="o">==</span> <span class="mi">0</span> <span class="o">&amp;&amp;</span> <span class="n">shouldRemove</span><span class="o">)</span>
      <span class="o">{</span>
        <span class="c1">// Not executed in case 11, omitted here</span>
      <span class="o">}</span>
      <span class="k">else</span>
      <span class="o">{</span>
        <span class="n">logEvent</span><span class="o">(</span> <span class="s">&quot;receiveDisseminatorReport&quot;</span><span class="o">,</span> <span class="s">&quot;case&quot;</span><span class="o">,</span> <span class="s">&quot;11&quot;</span> <span class="o">);</span>
        <span class="k">this</span><span class="o">.</span><span class="na">log</span><span class="o">(</span><span class="mi">1</span><span class="o">,</span><span class="s">&quot;11. CURRENT STATE { &quot;</span> <span class="o">+</span>
              <span class="s">&quot; positiveAMD = &quot;</span>       <span class="o">+</span> <span class="n">positiveAMD</span>           <span class="o">+</span>       <span class="s">&quot; | positiveDMA = &quot;</span>                     <span class="o">+</span>       <span class="n">positiveDMA</span>     <span class="o">+</span>
              <span class="s">&quot; | shouldRemove = &quot;</span>    <span class="o">+</span> <span class="n">shouldRemove</span>          <span class="o">+</span>       <span class="s">&quot; | posAMS.size() = &quot;</span>                   <span class="o">+</span>       <span class="n">posAMS</span><span class="o">.</span><span class="na">size</span><span class="o">()</span>   <span class="o">+</span>
              <span class="s">&quot; | purpose = &quot;</span>                 <span class="o">+</span> <span class="n">predictedOutcome</span>      <span class="o">+</span>
              <span class="s">&quot; | OUTCOME = INCONSISTENCY_2 }&quot;</span><span class="o">);</span>
        <span class="n">outcome</span> <span class="o">=</span> <span class="n">AggregationOutcome</span><span class="o">.</span><span class="na">UNSUCCESSFUL</span><span class="o">;</span>
        <span class="n">ack</span> <span class="o">=</span> <span class="kc">false</span><span class="o">;</span>
      <span class="o">}</span>
</pre></div>
</td></tr></table></div>
<table border="1" class="docutils">
<colgroup>
<col width="20%" />
<col width="80%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Line number</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>line 1</td>
<td><ol class="first last arabic simple">
<li>Peers have communicated before (start time = Big Bang)</li>
</ol>
</td>
</tr>
<tr class="row-odd"><td>line 9</td>
<td>shouldRemove (REMOVAL) are only sent by migrated disseminators</td>
</tr>
<tr class="row-even"><td>line 15</td>
<td><ol class="first last arabic simple" start="2">
<li>No entries in the list of states that the sending peer think that we
have</li>
</ol>
</td>
</tr>
<tr class="row-odd"><td>line 15</td>
<td><ol class="first last arabic simple" start="3">
<li>Migrated peer (inside a carrier node) sends a REMOVAL</li>
</ol>
</td>
</tr>
<tr class="row-even"><td>line 19</td>
<td><ol class="first last arabic simple" start="4">
<li>posAMS.size &gt; 1</li>
</ol>
</td>
</tr>
<tr class="row-odd"><td>line 27</td>
<td>Normally this should not happen, because posAMS should never be &gt;= 1</td>
</tr>
</tbody>
</table>
<p><strong>Encoding:</strong></p>
<blockquote>
<div><div class="line-block">
<div class="line">Topic Matched = 1</div>
<div class="line">positiveAMD:1</div>
<div class="line">positiveDMA:1</div>
<div class="line">posAMS.size: &gt;1</div>
</div>
</div></blockquote>
</div>
<div class="section" id="case-12">
<h2>Case 12<a class="headerlink" href="#case-12" title="Permalink to this headline">¶</a></h2>
<div class="highlight-java notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="k">if</span><span class="o">(</span><span class="n">positiveAMD</span> <span class="o">&amp;&amp;</span> <span class="n">positive</span> <span class="n">DMA</span><span class="o">)</span>
<span class="o">{</span>
  <span class="c1">// Not executed in case 12, omitted here</span>
<span class="o">}</span>
<span class="k">else</span>
<span class="o">{</span>
    <span class="k">if</span><span class="o">(!</span><span class="n">positiveAMD</span> <span class="o">&amp;&amp;</span> <span class="n">positiveDMA</span> <span class="o">&amp;&amp;</span> <span class="n">shouldRemove</span><span class="o">)</span>
    <span class="o">{</span>
      <span class="n">AMSAddition</span> <span class="o">=</span> <span class="kc">null</span><span class="o">;</span>
      <span class="n">HashSet</span><span class="o">&lt;</span><span class="n">State</span><span class="o">&gt;</span> <span class="n">possibles</span> <span class="o">=</span> <span class="o">(</span><span class="n">HashSet</span><span class="o">&lt;</span><span class="n">State</span><span class="o">&gt;)</span> <span class="n">disseminatorReport</span><span class="o">.</span><span class="na">get</span><span class="o">(</span><span class="n">DisseminatorReport</span><span class="o">.</span><span class="na">ALL_POSSIBLE_STATES</span><span class="o">);</span>
      <span class="k">if</span><span class="o">(</span><span class="n">possibles</span> <span class="o">!=</span> <span class="kc">null</span><span class="o">)</span>
      <span class="o">{</span>
        <span class="kt">boolean</span> <span class="n">a</span> <span class="o">=</span> <span class="kc">false</span><span class="o">;</span>
        <span class="k">for</span><span class="o">(</span><span class="n">State</span> <span class="n">state</span> <span class="o">:</span> <span class="n">possibles</span><span class="o">)</span> <span class="o">{</span>
          <span class="k">if</span><span class="o">(</span><span class="k">this</span><span class="o">.</span><span class="na">SMA</span><span class="o">.</span><span class="na">contains</span><span class="o">(</span><span class="n">state</span><span class="o">.</span><span class="na">getStateId</span><span class="o">().</span><span class="na">toString</span><span class="o">()))</span>
          <span class="o">{</span>
            <span class="k">this</span><span class="o">.</span><span class="na">removeSMAMembership</span><span class="o">(</span><span class="n">state</span><span class="o">);</span>
            <span class="k">this</span><span class="o">.</span><span class="na">removeAggregationState</span><span class="o">(</span><span class="n">state</span><span class="o">);</span>
            <span class="n">AMSRemoval</span> <span class="o">=</span> <span class="n">state</span><span class="o">;</span>
            <span class="n">outcome</span> <span class="o">=</span> <span class="n">AggregationOutcome</span><span class="o">.</span><span class="na">REMOVAL</span><span class="o">;</span>
            <span class="n">a</span> <span class="o">=</span> <span class="kc">true</span><span class="o">;</span>
            <span class="n">ack</span> <span class="o">=</span> <span class="kc">true</span><span class="o">;</span>
            <span class="n">System</span><span class="o">.</span><span class="na">err</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">&quot;\t\t\t\t\t^&amp;*^&amp;*^&amp;*^&amp;*^&amp;*^&amp;*^&amp;*^&amp;*^&amp;*^&amp;*&quot;</span><span class="o">);</span>
            <span class="k">break</span><span class="o">;</span>
          <span class="o">}</span>
        <span class="o">}</span>
        <span class="k">if</span><span class="o">(</span><span class="n">a</span> <span class="o">==</span> <span class="kc">false</span><span class="o">)</span>
        <span class="o">{</span>
          <span class="n">logEvent</span><span class="o">(</span> <span class="s">&quot;receiveDisseminatorReport&quot;</span><span class="o">,</span> <span class="s">&quot;case&quot;</span><span class="o">,</span> <span class="s">&quot;12&quot;</span> <span class="o">);</span>
          <span class="k">this</span><span class="o">.</span><span class="na">log</span><span class="o">(</span><span class="mi">1</span><span class="o">,</span><span class="s">&quot;12. CURRENT STATE { &quot;</span> <span class="o">+</span>
                <span class="s">&quot; positiveAMD = &quot;</span>     <span class="o">+</span> <span class="n">positiveAMD</span>           <span class="o">+</span>       <span class="s">&quot; | positiveDMA = &quot;</span>                     <span class="o">+</span>       <span class="n">positiveDMA</span>     <span class="o">+</span>
                <span class="s">&quot; | shouldRemove = &quot;</span>  <span class="o">+</span> <span class="n">shouldRemove</span>          <span class="o">+</span>       <span class="s">&quot; | posAMS.size() = &quot;</span>                   <span class="o">+</span>       <span class="s">&quot;NO POS AMS&quot;</span>    <span class="o">+</span>
                <span class="s">&quot; | purpose = &quot;</span>               <span class="o">+</span> <span class="n">predictedOutcome</span>      <span class="o">+</span>       <span class="s">&quot; | possibles == null ? &quot;</span>       <span class="o">+</span>       <span class="o">(</span><span class="n">possibles</span><span class="o">==</span><span class="kc">null</span><span class="o">)</span>       <span class="o">+</span>
                <span class="s">&quot; | NOTHING WAS REMOVED }&quot;</span><span class="o">);</span>
        <span class="o">}</span>
</pre></div>
</td></tr></table></div>
<table border="1" class="docutils">
<colgroup>
<col width="20%" />
<col width="80%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Line number</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>line 7</td>
<td><div class="first last line-block">
<div class="line">1. Only the receiving peer believes we have communicared before</div>
<div class="line">(typically when the sending peer never received the PUSH message)</div>
</div>
</td>
</tr>
<tr class="row-odd"><td>line 7</td>
<td>shouldRemove (REMOVAL) are only sent by migrated disseminators</td>
</tr>
<tr class="row-even"><td>line 18</td>
<td><ol class="first last arabic simple" start="2">
<li>Remove all possible states of the sending peer in the aggregator</li>
</ol>
</td>
</tr>
<tr class="row-odd"><td>line 20</td>
<td><ol class="first last arabic simple" start="3">
<li>Migrated peer (inside a carrier node) sends a REMOVAL</li>
</ol>
</td>
</tr>
<tr class="row-even"><td>line 27</td>
<td><ol class="first last arabic simple" start="4">
<li>Nothing got removed</li>
</ol>
</td>
</tr>
</tbody>
</table>
<p><strong>Encoding:</strong></p>
<blockquote>
<div><div class="line-block">
<div class="line">Topic Matched = 1</div>
<div class="line">positiveAMD:0</div>
<div class="line">positiveDMA:1</div>
<div class="line">purpose: REMOVAL</div>
</div>
</div></blockquote>
</div>
<div class="section" id="case-13">
<h2>Case 13<a class="headerlink" href="#case-13" title="Permalink to this headline">¶</a></h2>
<div class="highlight-java notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="k">if</span><span class="o">(</span><span class="n">positiveAMD</span> <span class="o">&amp;&amp;</span> <span class="n">positive</span> <span class="n">DMA</span><span class="o">)</span>
<span class="o">{</span>
  <span class="c1">// Not executed in case 13, omitted here</span>
<span class="o">}</span>
<span class="k">else</span>
<span class="o">{</span>
    <span class="k">if</span><span class="o">(!</span><span class="n">positiveAMD</span> <span class="o">&amp;&amp;</span> <span class="n">positiveDMA</span> <span class="o">&amp;&amp;</span> <span class="n">shouldRemove</span><span class="o">)</span>
    <span class="o">{</span>
      <span class="n">AMSAddition</span> <span class="o">=</span> <span class="kc">null</span><span class="o">;</span>
      <span class="n">HashSet</span><span class="o">&lt;</span><span class="n">State</span><span class="o">&gt;</span> <span class="n">possibles</span> <span class="o">=</span> <span class="o">(</span><span class="n">HashSet</span><span class="o">&lt;</span><span class="n">State</span><span class="o">&gt;)</span> <span class="n">disseminatorReport</span><span class="o">.</span><span class="na">get</span><span class="o">(</span><span class="n">DisseminatorReport</span><span class="o">.</span><span class="na">ALL_POSSIBLE_STATES</span><span class="o">);</span>
      <span class="k">if</span><span class="o">(</span><span class="n">possibles</span> <span class="o">!=</span> <span class="kc">null</span><span class="o">)</span>
      <span class="o">{</span>
        <span class="c1">// Not executed in case 13, omitted here</span>
      <span class="o">}</span>
      <span class="k">else</span>
      <span class="o">{</span>
        <span class="n">logEvent</span><span class="o">(</span> <span class="s">&quot;receiveDisseminatorReport&quot;</span><span class="o">,</span> <span class="s">&quot;case&quot;</span><span class="o">,</span> <span class="s">&quot;13&quot;</span> <span class="o">);</span>
        <span class="k">this</span><span class="o">.</span><span class="na">log</span><span class="o">(</span><span class="mi">1</span><span class="o">,</span><span class="s">&quot;13. CURRENT STATE { &quot;</span> <span class="o">+</span>
              <span class="s">&quot; positiveAMD = &quot;</span>       <span class="o">+</span> <span class="n">positiveAMD</span>           <span class="o">+</span>       <span class="s">&quot; | positiveDMA = &quot;</span>                     <span class="o">+</span>       <span class="n">positiveDMA</span>     <span class="o">+</span>
              <span class="s">&quot; | shouldRemove = &quot;</span>    <span class="o">+</span> <span class="n">shouldRemove</span>          <span class="o">+</span>       <span class="s">&quot; | posAMS.size() = &quot;</span>                   <span class="o">+</span>       <span class="s">&quot;NO POS AMS&quot;</span>    <span class="o">+</span>
              <span class="s">&quot; | purpose = &quot;</span>                 <span class="o">+</span> <span class="n">predictedOutcome</span>      <span class="o">+</span>       <span class="s">&quot; | possibles == null ? &quot;</span>       <span class="o">+</span>       <span class="o">(</span><span class="n">possibles</span><span class="o">==</span><span class="kc">null</span><span class="o">)</span>       <span class="o">+</span>
              <span class="s">&quot; | NOTHING WAS REMOVED }&quot;</span><span class="o">);</span>
      <span class="o">}</span>
</pre></div>
</td></tr></table></div>
<table border="1" class="docutils">
<colgroup>
<col width="20%" />
<col width="80%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Line number</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>line 7</td>
<td><div class="first last line-block">
<div class="line">1. Only the receiving peer believes we have communicared before</div>
<div class="line">(typically when the sending peer never received the PUSH message)</div>
</div>
</td>
</tr>
<tr class="row-odd"><td>line 7</td>
<td>shouldRemove (REMOVAL) are only sent by migrated disseminators</td>
</tr>
<tr class="row-even"><td>line 15</td>
<td><ol class="first last arabic simple" start="2">
<li>Nothing gets removed</li>
</ol>
</td>
</tr>
</tbody>
</table>
<p><strong>Encoding:</strong></p>
<blockquote>
<div><div class="line-block">
<div class="line">Topic Matched = 1</div>
<div class="line">positiveAMD:0</div>
<div class="line">positiveDMA:1</div>
<div class="line">purpose: REMOVAL</div>
</div>
</div></blockquote>
</div>
<div class="section" id="case-14">
<h2>Case 14<a class="headerlink" href="#case-14" title="Permalink to this headline">¶</a></h2>
<div class="highlight-java notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="k">if</span><span class="o">(</span><span class="n">positiveAMD</span> <span class="o">&amp;&amp;</span> <span class="n">positive</span> <span class="n">DMA</span><span class="o">)</span>
<span class="o">{</span>
  <span class="c1">// Not executed in case 14, omitted here</span>
<span class="o">}</span>
<span class="k">else</span>
<span class="o">{</span>
    <span class="k">if</span><span class="o">(!</span><span class="n">positiveAMD</span> <span class="o">&amp;&amp;</span> <span class="n">positiveDMA</span> <span class="o">&amp;&amp;</span> <span class="n">shouldRemove</span><span class="o">)</span>
    <span class="o">{</span>
      <span class="c1">// Not executed in case 14, omitted here</span>
    <span class="o">}</span>
    <span class="k">else</span>
    <span class="o">{</span>
      <span class="k">if</span><span class="o">(!</span><span class="n">positiveAMD</span> <span class="o">&amp;&amp;</span> <span class="n">positiveDMA</span> <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="n">shouldRemove</span><span class="o">)</span>
      <span class="o">{</span>
        <span class="k">if</span><span class="o">(</span><span class="s">&quot;EXPLOITATION&quot;</span><span class="o">.</span><span class="na">equals</span><span class="o">(</span><span class="n">predictedOutcome</span><span class="o">))</span>
        <span class="o">{</span>
          <span class="n">AMSAddition</span> <span class="o">=</span> <span class="n">newState</span><span class="o">;</span>
          <span class="n">outcome</span> <span class="o">=</span> <span class="n">AggregationOutcome</span><span class="o">.</span><span class="na">DOUBLE</span><span class="o">;</span>
          <span class="n">ack</span> <span class="o">=</span> <span class="kc">true</span><span class="o">;</span>

          <span class="n">logEvent</span><span class="o">(</span> <span class="s">&quot;receiveDisseminatorReport&quot;</span><span class="o">,</span> <span class="s">&quot;case&quot;</span><span class="o">,</span> <span class="s">&quot;14&quot;</span> <span class="o">);</span>
          <span class="k">this</span><span class="o">.</span><span class="na">log</span><span class="o">(</span><span class="mi">1</span><span class="o">,</span><span class="s">&quot;14. CURRENT STATE { &quot;</span> <span class="o">+</span>
                <span class="s">&quot; positiveAMD = &quot;</span>     <span class="o">+</span> <span class="n">positiveAMD</span>           <span class="o">+</span>       <span class="s">&quot; | positiveDMA = &quot;</span>     <span class="o">+</span>       <span class="n">positiveDMA</span>     <span class="o">+</span>
                <span class="s">&quot; | shouldRemove = &quot;</span>  <span class="o">+</span> <span class="n">shouldRemove</span>          <span class="o">+</span>       <span class="s">&quot; | posAMS.size() = &quot;</span>   <span class="o">+</span>       <span class="s">&quot;NO POS AMS&quot;</span>    <span class="o">+</span>
                <span class="s">&quot; | purpose = &quot;</span>               <span class="o">+</span> <span class="n">predictedOutcome</span>      <span class="o">+</span>       <span class="s">&quot; | ack = &quot;</span>                     <span class="o">+</span>       <span class="n">ack</span>                             <span class="o">+</span>
                <span class="s">&quot; | OUTCOME = DUPLICATE }&quot;</span><span class="o">);</span>
        <span class="o">}</span>
</pre></div>
</td></tr></table></div>
<table border="1" class="docutils">
<colgroup>
<col width="20%" />
<col width="80%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Line number</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>line 7</td>
<td><div class="first last line-block">
<div class="line">1. Only the receiving peer believes we have communicared before</div>
<div class="line">(typically when the sending peer never received the PUSH message)</div>
</div>
</td>
</tr>
<tr class="row-odd"><td>line 7</td>
<td>shouldRemove (REMOVAL) are only sent by migrated disseminators</td>
</tr>
<tr class="row-even"><td>line 15</td>
<td><div class="first last line-block">
<div class="line">If the current version, where predictedOutcome can only be REMOVAL or</div>
<div class="line">EXPLOITATION, this line of code is redundant and could be removed</div>
</div>
</td>
</tr>
<tr class="row-odd"><td>line 15</td>
<td>Duplicate, nothing gets changed</td>
</tr>
</tbody>
</table>
<p><strong>Encoding:</strong></p>
<blockquote>
<div><div class="line-block">
<div class="line">Topic Matched = 1</div>
<div class="line">positiveAMD:0</div>
<div class="line">positiveDMA:1</div>
<div class="line">purpose: UPDATE</div>
</div>
</div></blockquote>
</div>
<div class="section" id="case-15">
<h2>Case 15<a class="headerlink" href="#case-15" title="Permalink to this headline">¶</a></h2>
<div class="highlight-java notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="k">if</span><span class="o">(</span><span class="n">positiveAMD</span> <span class="o">&amp;&amp;</span> <span class="n">positive</span> <span class="n">DMA</span><span class="o">)</span>
<span class="o">{</span>
  <span class="c1">// Not executed in case 15, omitted here</span>
<span class="o">}</span>
<span class="k">else</span>
<span class="o">{</span>
    <span class="k">if</span><span class="o">(!</span><span class="n">positiveAMD</span> <span class="o">&amp;&amp;</span> <span class="n">positiveDMA</span> <span class="o">&amp;&amp;</span> <span class="n">shouldRemove</span><span class="o">)</span>
    <span class="o">{</span>
      <span class="c1">// Not executed in case 15, omitted here</span>
    <span class="o">}</span>
    <span class="k">else</span>
    <span class="o">{</span>
      <span class="k">if</span><span class="o">(!</span><span class="n">positiveAMD</span> <span class="o">&amp;&amp;</span> <span class="n">positiveDMA</span> <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="n">shouldRemove</span><span class="o">)</span>
      <span class="o">{</span>
        <span class="k">if</span><span class="o">(</span><span class="s">&quot;EXPLOITATION&quot;</span><span class="o">.</span><span class="na">equals</span><span class="o">(</span><span class="n">predictedOutcome</span><span class="o">))</span>
        <span class="o">{</span>
          <span class="c1">// Not executed in case 15, omitted here</span>
        <span class="o">}</span>
        <span class="k">else</span>
        <span class="o">{</span>
          <span class="n">outcome</span> <span class="o">=</span> <span class="n">AggregationOutcome</span><span class="o">.</span><span class="na">DOUBLE</span><span class="o">;</span>
          <span class="n">ack</span> <span class="o">=</span> <span class="kc">false</span><span class="o">;</span>

          <span class="n">logEvent</span><span class="o">(</span> <span class="s">&quot;receiveDisseminatorReport&quot;</span><span class="o">,</span> <span class="s">&quot;case&quot;</span><span class="o">,</span> <span class="s">&quot;15&quot;</span> <span class="o">);</span>
          <span class="k">this</span><span class="o">.</span><span class="na">log</span><span class="o">(</span><span class="mi">1</span><span class="o">,</span><span class="s">&quot;15. CURRENT STATE { &quot;</span> <span class="o">+</span>
                <span class="s">&quot; positiveAMD = &quot;</span>     <span class="o">+</span> <span class="n">positiveAMD</span>           <span class="o">+</span>       <span class="s">&quot; | positiveDMA = &quot;</span>     <span class="o">+</span>       <span class="n">positiveDMA</span>     <span class="o">+</span>
                <span class="s">&quot; | shouldRemove = &quot;</span>  <span class="o">+</span> <span class="n">shouldRemove</span>          <span class="o">+</span>       <span class="s">&quot; | posAMS.size() = &quot;</span>   <span class="o">+</span>       <span class="s">&quot;NO POS AMS&quot;</span>    <span class="o">+</span>
                <span class="s">&quot; | purpose = &quot;</span>               <span class="o">+</span> <span class="n">predictedOutcome</span>      <span class="o">+</span>       <span class="s">&quot; | ack = &quot;</span>                     <span class="o">+</span>       <span class="n">ack</span>                             <span class="o">+</span>
                <span class="s">&quot; | OUTCOME = DUPLICATE }&quot;</span><span class="o">);</span>
        <span class="o">}</span>
</pre></div>
</td></tr></table></div>
<table border="1" class="docutils">
<colgroup>
<col width="20%" />
<col width="80%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Line number</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>line 7</td>
<td>shouldRemove (REMOVAL) are only sent by migrated disseminators</td>
</tr>
<tr class="row-odd"><td>line 15</td>
<td><ol class="first last arabic">
<li><p class="first">Conditions:</p>
<p>AMD = 1, DMA = 0</p>
<p>AMD = 0, DMA = 0</p>
<p>This can be compressed to just DMA = 0</p>
</li>
</ol>
</td>
</tr>
<tr class="row-even"><td>line 19</td>
<td>Duplicate, nothing gets changed</td>
</tr>
</tbody>
</table>
<p><strong>Encoding:</strong></p>
<blockquote>
<div><div class="line-block">
<div class="line">Topic Matched = 1</div>
<div class="line">positiveAMD:0</div>
<div class="line">positiveDMA:1</div>
<div class="line">purpose: UPDATE</div>
</div>
</div></blockquote>
</div>
<div class="section" id="case-16">
<h2>Case 16<a class="headerlink" href="#case-16" title="Permalink to this headline">¶</a></h2>
<div class="highlight-java notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="k">if</span><span class="o">(</span><span class="n">positiveAMD</span> <span class="o">&amp;&amp;</span> <span class="n">positive</span> <span class="n">DMA</span><span class="o">)</span>
<span class="o">{</span>
  <span class="c1">// Not executed in case 16, omitted here</span>
<span class="o">}</span>
<span class="k">else</span>
<span class="o">{</span>
    <span class="k">if</span><span class="o">(!</span><span class="n">positiveAMD</span> <span class="o">&amp;&amp;</span> <span class="n">positiveDMA</span> <span class="o">&amp;&amp;</span> <span class="n">shouldRemove</span><span class="o">)</span>
    <span class="o">{</span>
      <span class="c1">// Not executed in case 16, omitted here</span>
    <span class="o">}</span>
    <span class="k">else</span>
    <span class="o">{</span>
      <span class="k">if</span><span class="o">(!</span><span class="n">positiveAMD</span> <span class="o">&amp;&amp;</span> <span class="n">positiveDMA</span> <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="n">shouldRemove</span><span class="o">)</span>
      <span class="o">{</span>
        <span class="c1">// Not executed in case 16, omitted here</span>
      <span class="o">}</span>
      <span class="k">else</span>
      <span class="o">{</span>
        <span class="n">logEvent</span><span class="o">(</span> <span class="s">&quot;receiveDisseminatorReport&quot;</span><span class="o">,</span> <span class="s">&quot;case&quot;</span><span class="o">,</span> <span class="s">&quot;16&quot;</span> <span class="o">);</span>
        <span class="k">this</span><span class="o">.</span><span class="na">log</span><span class="o">(</span><span class="mi">1</span><span class="o">,</span><span class="s">&quot;16. CURRENT STATE { &quot;</span> <span class="o">+</span>
              <span class="s">&quot; positiveAMD = &quot;</span>       <span class="o">+</span> <span class="n">positiveAMD</span>           <span class="o">+</span>       <span class="s">&quot; | positiveDMA = &quot;</span>     <span class="o">+</span>       <span class="n">positiveDMA</span>     <span class="o">+</span>
              <span class="s">&quot; | shouldRemove = &quot;</span>    <span class="o">+</span> <span class="n">shouldRemove</span>          <span class="o">+</span>       <span class="s">&quot; | posAMS.size() = &quot;</span>   <span class="o">+</span>       <span class="s">&quot;NO POS AMS&quot;</span>    <span class="o">+</span>
              <span class="s">&quot; | purpose = &quot;</span>                 <span class="o">+</span> <span class="n">predictedOutcome</span>      <span class="o">+</span>       <span class="s">&quot; | ack = &quot;</span>                     <span class="o">+</span>       <span class="n">ack</span>                             <span class="o">+</span>
              <span class="s">&quot; | ... }&quot;</span><span class="o">);</span>
      <span class="o">}</span>
</pre></div>
</td></tr></table></div>
<table border="1" class="docutils">
<colgroup>
<col width="20%" />
<col width="80%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Line number</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>line 7</td>
<td>shouldRemove (REMOVAL) are only sent by migrated disseminators</td>
</tr>
<tr class="row-odd"><td>line 13</td>
<td><ol class="first last arabic">
<li><p class="first">Conditions:</p>
<p>AMD = 1, DMA = 0</p>
<p>AMD = 0, DMA = 0</p>
<p>This can be compressed to just DMA = 0</p>
</li>
</ol>
</td>
</tr>
<tr class="row-even"><td>line 17 - 25</td>
<td>Do nothing</td>
</tr>
</tbody>
</table>
<p><strong>Encoding:</strong></p>
<blockquote>
<div><div class="line-block">
<div class="line">Topic Matched = 1</div>
<div class="line">positiveDMA:0</div>
</div>
</div></blockquote>
</div>
<div class="section" id="case-17">
<h2>Case 17<a class="headerlink" href="#case-17" title="Permalink to this headline">¶</a></h2>
<div class="highlight-java notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="k">if</span><span class="o">(</span><span class="n">positiveAMD</span> <span class="o">&amp;&amp;</span> <span class="n">positive</span> <span class="n">DMA</span><span class="o">)</span>
<span class="o">{</span>
  <span class="c1">// Not executed in case 16, omitted here</span>
<span class="o">}</span>
<span class="k">else</span>
<span class="o">{</span>
    <span class="k">if</span><span class="o">(!</span><span class="n">positiveAMD</span> <span class="o">&amp;&amp;</span> <span class="n">positiveDMA</span> <span class="o">&amp;&amp;</span> <span class="n">shouldRemove</span><span class="o">)</span>
    <span class="o">{</span>
      <span class="c1">// Not executed in case 16, omitted here</span>
    <span class="o">}</span>
    <span class="k">else</span>
    <span class="o">{</span>
      <span class="k">if</span><span class="o">(!</span><span class="n">positiveAMD</span> <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="n">positiveDMA</span><span class="o">)</span>
      <span class="o">{</span>
        <span class="n">AMSAddition</span> <span class="o">=</span> <span class="n">newState</span><span class="o">;</span>
        <span class="kt">boolean</span> <span class="n">DMAbool</span> <span class="o">=</span> <span class="k">this</span><span class="o">.</span><span class="na">addDMAMembership</span><span class="o">(</span><span class="n">node</span><span class="o">);</span>
        <span class="kt">boolean</span> <span class="n">SMAbool</span> <span class="o">=</span> <span class="k">this</span><span class="o">.</span><span class="na">addSMAMembership</span><span class="o">(</span><span class="n">newState</span><span class="o">);</span>

        <span class="k">if</span><span class="o">(</span><span class="n">DMAbool</span> <span class="o">&amp;&amp;</span> <span class="n">SMAbool</span><span class="o">)</span>
        <span class="o">{</span>
          <span class="k">this</span><span class="o">.</span><span class="na">addAggregationState</span><span class="o">(</span><span class="n">newState</span><span class="o">);</span>
          <span class="n">outcome</span> <span class="o">=</span> <span class="n">AggregationOutcome</span><span class="o">.</span><span class="na">FIRST</span><span class="o">;</span>
          <span class="n">ack</span> <span class="o">=</span> <span class="kc">true</span><span class="o">;</span>

          <span class="n">logEvent</span><span class="o">(</span> <span class="s">&quot;receiveDisseminatorReport&quot;</span><span class="o">,</span> <span class="s">&quot;case&quot;</span><span class="o">,</span> <span class="s">&quot;17&quot;</span> <span class="o">);</span>
          <span class="k">this</span><span class="o">.</span><span class="na">log</span><span class="o">(</span><span class="mi">1</span><span class="o">,</span><span class="s">&quot;17. CURRENT STATE { &quot;</span> <span class="o">+</span>
                <span class="s">&quot; positiveAMD = &quot;</span>     <span class="o">+</span> <span class="n">positiveAMD</span>           <span class="o">+</span>       <span class="s">&quot; | positiveDMA = &quot;</span>     <span class="o">+</span>       <span class="n">positiveDMA</span>     <span class="o">+</span>
                <span class="s">&quot; | shouldRemove = &quot;</span>  <span class="o">+</span> <span class="n">shouldRemove</span>          <span class="o">+</span>       <span class="s">&quot; | posAMS.size() = &quot;</span>   <span class="o">+</span>       <span class="s">&quot;NO POS AMS&quot;</span>    <span class="o">+</span>
                <span class="s">&quot; | purpose = &quot;</span>               <span class="o">+</span> <span class="n">predictedOutcome</span>      <span class="o">+</span>       <span class="s">&quot; | addDMAMembership(newNode) = &quot;</span> <span class="o">+</span> <span class="n">DMAbool</span> <span class="o">+</span>
                <span class="s">&quot; | addSMAMembership(newState) = &quot;</span> <span class="o">+</span> <span class="n">SMAbool</span><span class="o">+</span> <span class="s">&quot; | ack = &quot;</span>                     <span class="o">+</span>       <span class="n">ack</span>                             <span class="o">+</span>
                <span class="s">&quot; | OUTCOME = EXPLOITATION }&quot;</span><span class="o">);</span>
        <span class="o">}</span>
</pre></div>
</td></tr></table></div>
<table border="1" class="docutils">
<colgroup>
<col width="20%" />
<col width="80%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Line number</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>line 13</td>
<td><ol class="first last arabic simple">
<li>Peers have never communicated before</li>
</ol>
</td>
</tr>
<tr class="row-odd"><td>line 21</td>
<td><ol class="first last arabic simple" start="2">
<li>Peer and new state successfully added to the BloomFilters</li>
</ol>
</td>
</tr>
<tr class="row-even"><td>line 22 - 32</td>
<td>Do nothing</td>
</tr>
</tbody>
</table>
<p><strong>Encoding:</strong></p>
<blockquote>
<div><div class="line-block">
<div class="line">Topic Matched = 1</div>
<div class="line">positiveDMA:0</div>
<div class="line">positiveAMD:0</div>
</div>
</div></blockquote>
</div>
<div class="section" id="case-20">
<h2>Case 20<a class="headerlink" href="#case-20" title="Permalink to this headline">¶</a></h2>
<div class="highlight-java notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="k">if</span><span class="o">(</span><span class="k">this</span><span class="o">.</span><span class="na">myTopic</span><span class="o">.</span><span class="na">equals</span><span class="o">(</span><span class="n">otherTopic</span><span class="o">))</span>
<span class="o">{</span>
  <span class="c1">// Not executed in case 20, omitted here</span>
<span class="o">}</span>
<span class="k">else</span>
<span class="o">{</span>
  <span class="n">ack</span> <span class="o">=</span> <span class="kc">false</span><span class="o">;</span>

  <span class="n">logEvent</span><span class="o">(</span> <span class="s">&quot;receiveDisseminatorReport&quot;</span><span class="o">,</span> <span class="s">&quot;case&quot;</span><span class="o">,</span> <span class="s">&quot;20&quot;</span> <span class="o">);</span>
  <span class="k">this</span><span class="o">.</span><span class="na">log</span><span class="o">(</span><span class="mi">1</span><span class="o">,</span><span class="s">&quot;20. CURRENT STATE { &quot;</span> <span class="o">+</span>
        <span class="s">&quot; positiveAMD = &quot;</span>     <span class="o">+</span> <span class="n">positiveAMD</span>           <span class="o">+</span>       <span class="s">&quot; | positiveDMA = &quot;</span>     <span class="o">+</span>       <span class="n">positiveDMA</span>     <span class="o">+</span>
        <span class="s">&quot; | shouldRemove = &quot;</span>  <span class="o">+</span> <span class="n">shouldRemove</span>          <span class="o">+</span>       <span class="s">&quot; | posAMS.size() = &quot;</span>   <span class="o">+</span>       <span class="s">&quot;NO POS AMS&quot;</span>    <span class="o">+</span>
        <span class="s">&quot; | purpose = &quot;</span>               <span class="o">+</span> <span class="n">predictedOutcome</span>      <span class="o">+</span>       <span class="s">&quot; | ack = &quot;</span>                     <span class="o">+</span>       <span class="n">ack</span>                             <span class="o">+</span>
        <span class="s">&quot; | OUTCOME = INCOCNSISTENCY DUE TO TOPIC MISMATCH }&quot;</span><span class="o">);</span>
  <span class="n">outcome</span> <span class="o">=</span> <span class="n">AggregationOutcome</span><span class="o">.</span><span class="na">UNSUCCESSFUL</span><span class="o">;</span>
  <span class="n">AMSAddition</span> <span class="o">=</span> <span class="kc">null</span><span class="o">;</span>
  <span class="n">AMSRemoval</span> <span class="o">=</span> <span class="kc">null</span><span class="o">;</span>
  <span class="n">aggregatorReport</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="n">AggregatorReport</span><span class="o">.</span><span class="na">ACK</span><span class="o">,</span> <span class="n">ack</span><span class="o">);</span>
  <span class="n">aggregatorReport</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="n">AggregatorReport</span><span class="o">.</span><span class="na">OUTCOME</span><span class="o">,</span> <span class="n">outcome</span><span class="o">);</span>
  <span class="n">aggregatorReport</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="n">AggregatorReport</span><span class="o">.</span><span class="na">AMS_ADDITION</span><span class="o">,</span> <span class="n">AMSAddition</span><span class="o">);</span>
  <span class="n">aggregatorReport</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="n">AggregatorReport</span><span class="o">.</span><span class="na">AMS_REMOVAL</span><span class="o">,</span> <span class="n">AMSRemoval</span><span class="o">);</span>
  <span class="n">disseminatorReport</span><span class="o">.</span><span class="na">clear</span><span class="o">();</span>
  <span class="k">return</span> <span class="n">aggregatorReport</span><span class="o">;</span>
<span class="o">}</span>
</pre></div>
</td></tr></table></div>
<table border="1" class="docutils">
<colgroup>
<col width="20%" />
<col width="80%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Line number</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>line 5</td>
<td><ol class="first last arabic simple">
<li>Topic mismatch</li>
</ol>
</td>
</tr>
<tr class="row-odd"><td>line 5 - 24</td>
<td>Do nothing</td>
</tr>
</tbody>
</table>
<p><strong>Encoding:</strong></p>
<blockquote>
<div><div class="line-block">
<div class="line">Topic Matched = 0</div>
</div>
</div></blockquote>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="change.selected.states.html" class="btn btn-neutral float-right" title="Changing of selected states" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="conceptual.architecture.html" class="btn btn-neutral float-left" title="Conceptual Architecture" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2019, Edward Gaere

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
    

  <style>
    /* Sidebar header (and topbar for mobile) */
     .wy-nav-side {
    
        background: rgb(30,115,190);
        color:#eee;
        
     }


    .wy-side-nav-search {
    
        background: rgb(30,115,190);
        
    }

    .wy-menu-vertical li.current{
        background: #d6dfd3;
    }

    .wy-menu-vertical a:active{
        background-color:rgb(30,115,190);
    }

    .fa-home::before, .icon-home::before {
        content:"";
    }

    a.icon-home {
        width: 50%;
        margin-left: -6px;
        font-size: 0%;
        content:url("http://dias-net.org/wp-content/uploads/2016/08/silver-nodes-above-extended.png");
    }

    .wy-nav-content{
        max-width: initial;
    }
  </style>


</body>
</html>